<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://limjoonchul.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Facamp lim">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://limjoonchul.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Spring/Servlet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Spring/Servlet/" class="article-date">
  <time datetime="2020-11-21T05:59:50.005Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Spring/Servlet/">Spring-Servlet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><ul>
<li>서블릿을 이해하면 자바의 서버사이드쪽의 동작원리를 이해하는데 많은 도움이 된다.</li>
</ul>
<h2 id="이클립스에서-프로젝트-설정"><a href="#이클립스에서-프로젝트-설정" class="headerlink" title="이클립스에서 프로젝트 설정"></a>이클립스에서 프로젝트 설정</h2><ul>
<li>lib폴더에 외부 라이브러리 jar파일(h2, lombok)을 넣으면 라이브러리스 폴더 하위에 <code>Web App Libraries</code>에 생긴다<br>그래야 jar 파일에 있는 클래스를 우리가 만든 클래스에서 이용할 수 있다.<h3 id="이클립스에서-servlet-mapping하는-방법"><a href="#이클립스에서-servlet-mapping하는-방법" class="headerlink" title="이클립스에서 servlet-mapping하는 방법"></a>이클립스에서 servlet-mapping하는 방법</h3><ol>
<li>프로젝트에서 src폴더를 우클릭해서 서블릿을 누른다</li>
<li>패키지명, 클래스명을 입력하고 next 누르면 클래스명(HelloServlet)이 name(HelloServlet)으로 되어있다.</li>
<li>클래스명을 소문자(hello)로 바꾼다.  </li>
<li>URL Mappings의 /hello를 눌러서 원하는데로 바꾸고(/hello.do) 피니시 누르면 된다.<br>그러면 web.xml의 servlet-mapping이 생겨져있다.<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>hello.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>브라우저가 /hello.do로 요청을 하면 hello.HelloServlet이 클래스를 찾아서 실행해라 라는 의미이다.</li>
</ul>
</li>
</ul>
<h3 id="프로젝트를-서버에-등록하는-방법"><a href="#프로젝트를-서버에-등록하는-방법" class="headerlink" title="프로젝트를 서버에 등록하는 방법"></a>프로젝트를 서버에 등록하는 방법</h3><ol>
<li>하단에 servers에서 tomcat에 오른쪽 키 add/remove를 누른다</li>
<li>창이 뜨면 해당 파일을 눌러서 add를 클릭한다.</li>
<li>오른쪽 configured로 add를 해주고 끝내면, 톰캣 서버가 이 프로젝트를 관리 해준다.</li>
</ol>
<ul>
<li>servers창에서 톰캣을 누르면 프로젝트가 들어가 있는걸 확인할 수 있다. <ul>
<li>단, 다이나믹 웹 프로젝트로 만들어져 있어야 등록 가능하다.</li>
</ul>
</li>
</ul>
<h3 id="톰캣이란"><a href="#톰캣이란" class="headerlink" title="톰캣이란"></a>톰캣이란</h3><ul>
<li>톰캣은 아파치 재단에서 만든 자바로 되어있는 웹 어플리케이션 서버이다.<h2 id="Servlet-1"><a href="#Servlet-1" class="headerlink" title="Servlet"></a>Servlet</h2></li>
<li>자바를 사용하여 웹페이지를 동적으로 생성하는 서버측 프로그램을 말한다.</li>
<li>웹 서버의 선응을 향상시키기 위해 사용되는 자바 클래스의 일종이다.<ul>
<li>JSP와 비슷하지만 JSP는 HTML문서 안에 Java코드를 포함하고 Servlet은 Java코드안에 HTML을 포함한다.</li>
</ul>
</li>
<li>서블릿은 자바 기술은 맞지만 톰캣 도움 없인 절대 실행할 수 없다.<h3 id="서블릿-클래스-작성-규칙"><a href="#서블릿-클래스-작성-규칙" class="headerlink" title="서블릿 클래스 작성 규칙"></a>서블릿 클래스 작성 규칙</h3></li>
<li>외울 필요는 없고 이런 규칙으로 작성된다는 것만 알아두면 된다. IDE에서 서블릿으로 클래스를 생성하게 되면 자동으로 이 규칙에 맞게 생성해준다.<ol>
<li>HttpServlet 클래스를 상속해야 한다. - 서블릿으로 인지한다.</li>
<li>public 클래스로 만들어야 한다. - 그래야 서블릿엔진에서 접근할 수 있으니깐.</li>
<li>default 생성자가 있어야 한다. - 안 만들어도 자동 제공</li>
<li>요청 방식(method)에 따라 doGet이나 doPost를 재정의(Overriding)한다.</li>
<li>부모(HttpServlet) 클래스의 메소드를 재정의 하지 않으면 상속된다.</li>
</ol>
</li>
</ul>
<h3 id="서블릿의-특징"><a href="#서블릿의-특징" class="headerlink" title="서블릿의 특징"></a>서블릿의 특징</h3><ul>
<li><p>자바 클래스이고, ServletEngine에 의해서만 동작한다.</p>
</li>
<li><p>Multi-Thread </p>
<ul>
<li>Servlet은 Multi-Thread로 동작하기 때문에 효율적이다.</li>
<li>서블릿은 멀티스레드로 동작하기 때문에 웹에서 매우 효율적이다.</li>
<li>서블릿을 멀티스레드로 동작시키는 것은 서블릿엔진이 하는 것이지 개발자가 하는 것이 아니다.</li>
</ul>
</li>
<li><p>플랫폼 독립성</p>
<ul>
<li>서블릿은 자바로 작성되기 때문에 플랫폼에 무관하게 동일한 실행결과를 보인다.</li>
</ul>
</li>
<li><p>서버 독립성</p>
<ul>
<li>서블릿은 웹 서버와 무관하게 실행이 된다. 서블릿 규칙에 맞게 작성을 해놓으면 톰캣서버에서 되던게 제우스 같은 다른 서버에서도 똑같이 실행이 된다.</li>
</ul>
</li>
<li><p>플랫폼 독립성과 서버 독립성 이 두가지로 이식성이 좋다. </p>
</li>
<li><p>확장성 - 외부 프레임워크라 유틸리티 클래스라던지 서블릿 프로그램을 더 빠르게 할 수 있다.</p>
</li>
</ul>
<h3 id="서블릿의-단점"><a href="#서블릿의-단점" class="headerlink" title="서블릿의 단점"></a>서블릿의 단점</h3><ul>
<li>서블릿은 Java코드안에 HTML을 담는 것이여서 HTML같은 코드를 바꿀려면 하나하나 바꿔줘야 하고 자동완성 기능도 지원이 안된다<br>그리고 <code>&quot;&quot;</code> , <code>&#39;&#39;</code> 를 같이 써야 해서 굉장히 헷갈리고 자바 문법에 어긋나서 에러가 나는 경우도 생긴다.<br>전체적으로 디자인을 바꾸는게 엄청 귀찮고 번거롭다.</li>
</ul>
<h3 id="톰캣-서버-구동"><a href="#톰캣-서버-구동" class="headerlink" title="톰캣 서버 구동"></a>톰캣 서버 구동</h3><ul>
<li><p>톰캣 서버를 구동하면 톰캣 객체가 생성이 되고, 그 안에 포함 되어있는 서블릿 엔진도 생성이 된다.</p>
</li>
<li><p>서블릿 엔진은 web.xml을 로딩하고, 스레드 풀을 생성하고, 전체 라이프 사이클을 관리한다.</p>
</li>
<li><p>웹 기술은 개발자는 클래스만 만들 뿐이고 객체 생성해주는 건 개발자가가 아니다.</p>
</li>
<li><p>서블릿 엔진이 이 객체들을 생성해주는 코드를 실행하고 메소드를 호출하는 코드를 실행시킨다. 우리 눈엔 내부 동작이 안 보이게 동작한다.</p>
</li>
<li><p>서블릿 엔진이 생성될 때 web.xml이 로딩한다고 했는데 개발자가 개입할 수 있는건 hello.do라고 치면 hello.servlet이라는 객체를 생성하고<br>객체가 가지고 있는 메소드를 호출하도록 설정만 해두는 것이다.</p>
</li>
</ul>
<h4 id="구동-흐름"><a href="#구동-흐름" class="headerlink" title="구동 흐름"></a>구동 흐름</h4><ul>
<li>서버 구동 버튼을 누르면 내부적으로 <code>new tomcat()</code>이 객체 생성이 되는 것이다.</li>
<li>톰캣 객체가 생성되면서 servers 창에 로그가 뜨는데 <code>StartServiceCatalina</code> 까지가 톰캣 서버가 구동 되었다는 의미이다.<ul>
<li>이 과정에서 에러가 안나면 된다.</li>
</ul>
</li>
<li>톰캣 객체가 서블릿 엔진을 생성하는 코드를 가지고 있어서 서블릿 엔진이 생성이 된다.</li>
<li>서블릿 엔진 객체가 생성이 될 때 web.xml 파일이 전달 되는 것이다. 그래서 web.xml이 중요한 것이다. <code>new ServletEngine(web.xml)</code></li>
<li>그 다음 클라이언트의 요청이 오면 web.xml에 매핑된 정보를 가지고 매핑해서 서블릿 객체를 생성하는 서블릿 라이프 사이클이 돌아가는 것이다.<br>밑에 서블릿 수행 흐름이 실행이 된다.</li>
</ul>
<h3 id="서블릿-수행-흐름"><a href="#서블릿-수행-흐름" class="headerlink" title="서블릿 수행 흐름"></a>서블릿 수행 흐름</h3><p><img src="/Java/documents/images/%EC%84%9C%EB%B8%94%EB%A6%BF%EC%88%98%ED%96%89%ED%9D%90%EB%A6%84.jpg" alt="서블릿수행흐름"></p>
<ol>
<li>클라이언트에서 서블릿 요청(/hello.do)이 오면 서블릿 엔진은 요청된 서블릿이 메모리에 존재하는지 여부를 판단한다.</li>
<li>요청한 서블릿이 메모리에 없으면 서블릿도 클래스니깐 web.xml에 매핑된 hello.servlet를 객체를 찾아서 생성하고 메모리에 로딩한다.</li>
<li>생성자를 호출한다. 무조건 디폴트 생성자를 찾아서 메모리에 뜬다.(절대 매개변수가 있는 생성자를 인식하지 못한다.)</li>
<li>Init()를 호출한다. 디폴트 생성자가 호출이되서 서블릿 객체가 메모리에 뜨기 때문에 멤버번수를 <code>단 한번만</code> 초기화할 때 필요하다.</li>
<li>스레드 풀에서 스레드가 랜덤으로 튀어 나와서 할당이 된다.</li>
<li>이 스레드가 서블릿 객체의 service()를 호출한다.(스레드는 run()를 호출하게 되어있는데 내부적으로 이 run()은 service()만 호출하게 되어있다.)<ul>
<li>메모리에 올라간 서블릿 객체를 스레드 풀에 있는 스레드들이 공유한다.</li>
</ul>
</li>
<li>service() 메소드를 오버라이딩 하지 않으면 부모의 것이 호출이 되는데 이건 브라우저가 서버에 요청한 방식에 따라서<br>doGet(), doPost() 메소드를 호출하여서 메소드 동작이 이루어진다.<ul>
<li>브라우저의 요청 방식에 대해서 확신이 있다면 해당 메소드만 오버라이딩하면 되는데, 요청 방식을 모르는 경우 service()를 이용하여 모든 요청을 다 처리하면 된다.</li>
</ul>
</li>
<li>그 다음 결과를 응답으로 클라이언트에게 보내준다.</li>
</ol>
<ul>
<li><p>처음 서블릿 요청이 들어오게 되면 위의 과정을 처음부터 수행하지만, 한 번 메모리가 할당이 되면 메모리에 존재하기 때문에<br>그 이후 부터는 5번부터 과정부터 시작이되는데 이때 새로운 스레드가 할당되서 실행이 이루어진다. 앞의 과정을 생략하니 수행 속도가 빠르다. </p>
</li>
<li><p>그래서 어플리케이션을 서버에 올려서 배포를 할 때 한 번 동작을 시키고 배포를 한다 그래야 이용하는 클라이언트들이<br>모두 비슷한 실행 속도를 제공받을 수 있으니깐.</p>
</li>
<li><p>doPost(),doGet() 메소드를 오버라이딩하면 HttpReqest, HttpResponse 객체를 매개변수로 받게 되어 있는데,<br>이 매개변수의 객체들도 서블릿 엔진이 생성해서 넣어주는 것이다.</p>
<ul>
<li>먼저 Request, Response 객체를 생성하고, doPost(),doGet()를 호출한다.</li>
</ul>
</li>
</ul>
<ul>
<li>서버를 재 구동할 때 까지 서블릿 객체가 메모리에 띄워져 있다. 서버를 끊으면 서블릿 엔진이 죽어서 서블릿 객체를 메모리에서 회수하게 되어있다.<br>서블릿 객체가 종료되기 직전에 destroy() 메소드가 호출되면서 자원들을 회수하고 종료된다.</li>
</ul>
<h3 id="HttpServletRequest-HttpServletResponse"><a href="#HttpServletRequest-HttpServletResponse" class="headerlink" title="HttpServletRequest, HttpServletResponse"></a>HttpServletRequest, HttpServletResponse</h3><p><img src="/Java/documents/images/Servlet%EC%A3%BC%EC%9A%94%EA%B0%9D%EC%B2%B4.jpg" alt="Servlet주요객체"></p>
<h4 id="HttpServletReqeust"><a href="#HttpServletReqeust" class="headerlink" title="HttpServletReqeust"></a>HttpServletReqeust</h4><ul>
<li><p>클라이언트가 전달한 정보를 추출하기 위해 사용한다.</p>
</li>
<li><p>Request 객체는 브라우저가 서버쪽으로 보낸 요청 프로토콜이 담겨서 메소드의 파라미터로 전달된다.</p>
<ul>
<li>엄청나게 많은 정보들이 담겨져서 전송이 된다.</li>
</ul>
</li>
<li><p>Request의 주요 사용하는 메소드</p>
<ul>
<li>setcharacterencoding() - 입력 정보가 한글로 되어있을 때 변환되게 하기 위해서 사용한다.</li>
<li>getParameter() - URLD의 ?뒤의 파라미터를 가져올 때 사용한다.</li>
<li>getSession() - 세션 정보를 가져올 때 사용한다.</li>
<li>getReuestURL() - URL 호출</li>
<li>getMethod() - 요청방식이 무엇인지 확인한다.</li>
<li>getQueryString() - 쿼리스트링을 출력한다. </li>
</ul>
</li>
</ul>
<h4 id="HttpServletResponse"><a href="#HttpServletResponse" class="headerlink" title="HttpServletResponse"></a>HttpServletResponse</h4><ul>
<li>프로그램의 처리 결과를 클라이언트로 보내기 위해 사용한다.</li>
<li>Response 객체는 클라이언트로 보낼 정보들이 담겨지고, 응답 프로토콜과 관련되서 정보들이 응답 프로토콜에 의해 클라이언트로 전송된다.  </li>
<li>Response의 주요 사용하는 메소드<ul>
<li>setContentType() - 브라우저쪽에 출력하는 메소드에 한글이 있을 때 이걸 먼저 설정을 해준다.<br>그런 다음 출력스트림을 얻는다. </li>
<li>getWriter() - 이걸 호출하면 프린트라이터라는 출력스트림이 얻어지는데<br>이 출력스트림은 정확히 바디와 관련된 출력스트림이 만들어진다.</li>
<li>sendRedirect() - 새로운 URL로 보낼 때 사용하는 메소드이다. 브라우저에게 새로운 URL을 요청하라고 명령하는 메소드</li>
</ul>
</li>
</ul>
<h3 id="Encoding-설정"><a href="#Encoding-설정" class="headerlink" title="Encoding 설정"></a>Encoding 설정</h3><ul>
<li><code>request.setCharacterEncoding(&quot;EUC-KR&quot;)</code>처럼 각 클래스마다 직접 인코딩 지정하는 방식을 사용할 수 있는데,<br>인코딩 정책이 바뀌거나, 유지보수적인 측면에서도 좋지 못하다 그래서 변수로 값을 전달바는 형태로 바꾸어야 한다.</li>
<li>방법에는 2가지 방법이 있는데 하나는 로컬 파라미터를 이용하는 것이고 다른 하나는 글로벌 파라미터를 이용하는 것이다.</li>
</ul>
<h4 id="로컬-파라미터-Local-Parameter"><a href="#로컬-파라미터-Local-Parameter" class="headerlink" title="로컬 파라미터(Local Parameter)"></a>로컬 파라미터(Local Parameter)</h4><ul>
<li>이렇게 설정하면 insertBoardServlet에서만 로컬 파라미터에 접근할 수 있다.</li>
<li>Web.XML에서만 변경을 하면되서 자바코드를 하나하나 수정할 필요가 없다.</li>
<li>서블릿 객체가 호출 되면 처음에 디폴트 생성자가 호출되고 init()이 처음이 호출이 되는데 이 init이 config객체를 호출하는데 서블릿 엔진에 의해서 생성되는데<br>이 config객체는 로컬파라미터만 세팅이 된다. 로컬 파라미터의 정보가 담겨져서 config 객체가 생성되서 파라미터로 담겨진다.</li>
<li>이렇게 했을 때 단점은 XML 모든 서블릿에 하나하나 설정해줘야하는 번거로움이 생긴다.<br>그래서 전체에 한번만 파라미터를 설정하면 되는 글로벌 파라미터 방법이 있다.</li>
<li><code>ServletConfig</code>를 사용한다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypaper.web.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rubypapper.biz.board.BoardDAO;</span><br><span class="line"><span class="keyword">import</span> com.rubypapper.biz.board.BoardVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InsertBoardServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> String encoding;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">       <span class="comment">// web.xml 파일에 설정된 로컬 파라미터 정보 추출</span></span><br><span class="line">       encoding = config.getInitParameter(<span class="string">&quot;boardEncoding&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    </span><br><span class="line">        request.setCharacterEncoding(encoding); <span class="comment">// 인코딩 설정</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>insertBoard<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.rubypaper.web.board.InsertBoardServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>boardEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>EUC-KR<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="글로벌-파라미터-Global-Parameter"><a href="#글로벌-파라미터-Global-Parameter" class="headerlink" title="글로벌 파라미터(Global Parameter)"></a>글로벌 파라미터(Global Parameter)</h4></li>
<li>XML에 한번만 설정해주면 서블릿 전체에서 사용할 수 있다.</li>
<li><code>ServletContext</code>를 사용한다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypaper.web.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rubypapper.biz.board.BoardDAO;</span><br><span class="line"><span class="keyword">import</span> com.rubypapper.biz.board.BoardVO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InsertBoardServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> String encoding;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 0. 글로벌 파라미터 정보 추출</span></span><br><span class="line">        ServletContext context = getServletContext(); <span class="comment">// 부모로부터 상속됨 httpservlet에서 상송됨</span></span><br><span class="line">        encoding = context.getInitParameter(<span class="string">&quot;boardEncoding&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        request.setCharacterEncoding(encoding); <span class="comment">// 마찬가지로 가져올때 포맷 설정</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;WebApp_ID&quot;</span> <span class="attr">version</span>=<span class="string">&quot;2.5&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>ServletProject<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>boardEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>EUC-KR<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>insertBoard<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/insertBoard.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>deleteBoard<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>deleteBoard<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.rubypaper.web.board.DeleteBoardServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>deleteBoard<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/deleteBoard.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Servlet-Filter"><a href="#Servlet-Filter" class="headerlink" title="Servlet Filter"></a>Servlet Filter</h3><ul>
<li>Filter는 서버가 뜰 때 바로 메모리에 로딩되서 FreeLoading, 서블릿은 요청이 있을 때 메모리에 로딩되서 Lazy-Loding이다.</li>
<li>필터는 클라이언트의 Request가 Servlet에 도달하기 전에 요청 데이터를 원하는 형태로 조작하는 사전처리,<br>혹은 Servlet에서 나온 응답 데이터를 조작하여 사후처리 목적으로 사용된다.</li>
<li>필터는 기능당 하나씩 만든다 (예로, 시간을 체크하는 TimeCheckFilter, 인코딩 설정하는 EncodingFilter 등)</li>
<li>서블릿 실행 사전 처리 사후처리할 때 필요하다.</li>
<li>실제 서블릿을 실행시키는 코드는 <code>chain.doFilter()</code> 이걸 주석 처리하면 서블릿이 실행이 안된다. 사전처리 사후처리만 실행이 된다.</li>
</ul>
<p><img src="/Java/documents/images/ServletFilter.jpg" alt="ServletFilter"></p>
<ul>
<li>Servlet 뒤에 .do만 붙어있으면  요청이 오면 동작이되도록 설정했다.(*.do) </li>
<li>init(), destroy(), doFilter()는 Filter인터페이스를 상속하고 있어서 오버라이딩이 되어 있어야 한다.<h4 id="Filter-순서"><a href="#Filter-순서" class="headerlink" title="Filter 순서"></a>Filter 순서</h4></li>
</ul>
<ol>
<li>브라우저에서  .do로 요청이 오면 filter가 가로채서 사전 처리가 된다. </li>
<li>그런 다음 chain.dofilter를 만나면 해당 서블릿이 실행된다. 서블릿의 메소드들이 실행이 된다. </li>
<li>메소드가 실행되고 권한이 다시 필터로 돌아오고 사후처리가 실행되고 브라우저로 돌아간다.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.web.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeCheckFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TimeCheckFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===&gt; TimeCheckFilter 생성&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig fConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 클라이언트가 요청한 서블릿 정보 추출</span></span><br><span class="line">        HttpServletRequest req = (HttpServletRequest) request; <span class="comment">// 왜 형변환 하는지 확인</span></span><br><span class="line">        String uri = req.getRequestURI(); </span><br><span class="line">        String path = uri.substring(uri.lastIndexOf(<span class="string">&quot;/&quot;</span>)); <span class="comment">// 마지막 /이후의 값이 나온다.</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// 이 시점이 클라이언트가 호출한 서블릿이 실행된다. 이코드를 기준으로 위의 시간을 구하고 끝나고 실행시간을 구하면 어떤 서블릿이 실행되는 시간을 구할 수 있다. </span></span><br><span class="line">        <span class="comment">// 해당 서블릿 호출이 오랜시간이 걸리면 코드를 수정해야 한다.</span></span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(path + <span class="string">&quot;요청 처리에 소요된 시간: &quot;</span> + (endTime-startTime) + <span class="string">&quot;(ms)초&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>timeCheck<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.rubypapper.web.common.TimeCheckFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>timeCheck<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="init"><a href="#init" class="headerlink" title="init()"></a>init()</h4><ul>
<li>필터를 생성할 때 <code>FilterConfig</code> 객체를 서블릿 엔진에서 생성해서<br><code>web.xml</code>의 로컬 파라미터를 담아서 <code>inint()</code>의 파라미터로 넘겨준다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.web.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String encoding;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig fConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="comment">// web.xml 파일에 설정된 로컬 파라미터 정보 추출</span></span><br><span class="line">        encoding = fConfig.getInitParameter(<span class="string">&quot;encoding&quot;</span>);</span><br><span class="line">        name = fConfig.getInitParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="chain-doFilter"><a href="#chain-doFilter" class="headerlink" title="chain.doFilter()"></a>chain.doFilter()</h4><ul>
<li><p>메소드명에서도 유추해볼 수 있듯이 필터들을 체인처럼 연쇄적으로 동작 시킬 수 있다.<br>필터는 하나의 기능만을 하기 때문에 사전 처리나 사후 처리를 할 때 설정을 해두면<br>필터하나가 하나의 기능을 수행하고 끝나고 <code>chan.doFilter()</code>를 만나면 다음 기능을 가진 필터가 수행이 된다.<br>이렇게 쭉 메모리에 로딩된 순서대로 동작을 하고 필터가 없을 때 서블릿으로 실행권한이 넘어가게 된다.</p>
</li>
<li><p>TimeCheckFilter가 먼저 실행되고 CharacterEncodingFilter가 실행이 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeCheckFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        <span class="comment">// 클라이언트가 요청한 서블릿 정보 추출</span></span><br><span class="line">        HttpServletRequest req = (HttpServletRequest) request; <span class="comment">// 왜 형변환 하는지 확인</span></span><br><span class="line">        String uri = req.getRequestURI(); </span><br><span class="line">        String path = uri.substring(uri.lastIndexOf(<span class="string">&quot;/&quot;</span>)); <span class="comment">// 마지막 /이후의 값이 나온다.</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">        </span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">        <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">        System.out.println(path + <span class="string">&quot;요청 처리에 소요된 시간: &quot;</span> + (endTime-startTime) + <span class="string">&quot;(ms)초&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        request.setCharacterEncoding(encoding);</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="서블릿의-로딩시점을-변경-가능"><a href="#서블릿의-로딩시점을-변경-가능" class="headerlink" title="서블릿의 로딩시점을 변경 가능"></a>서블릿의 로딩시점을 변경 가능</h4><ul>
<li>필터는 Free-Loading이라 바로 메모리에 올라가지만 서블릿은 Lazy-Loding이여서 요청이 올 때 메모리에 로딩이 되는데<br>이걸 web.xml에 설정을 해서 Free-Loding처럼 바로 메모리에 올라가도록 변경이 가능하다.</li>
<li>해당 서블릿에 <code>&lt;load-on-startup&gt;숫자&lt;/load-on-startup&gt;</code> 이걸 작성해주면 되는데 숫자가 작을 수록 우선순위가 더 높다.<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.rubypaper.web.user.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>getBoardList<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getBoardList<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.rubypaper.web.board.GetBoardListServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>getBoardList<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getBoardList.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="ServletListner"><a href="#ServletListner" class="headerlink" title="ServletListner"></a>ServletListner</h3><ul>
<li>서블릿엔진이 실행된 직후 바로 실행이 되는 객체이다.</li>
<li>서블릿이 실행되기전에 딱 한번 실행이되는 로직이 있다면 Listener init()메소드에 설정을 해놓으면 된다.</li>
<li>필터보다 먼저 메모리에 뜨게 된다.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Spring/Servlet/" data-id="ckhrac5ju002w8cu2dp2g3pen" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/Pholymorphism" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Spring/Pholymorphism/" class="article-date">
  <time datetime="2020-11-21T05:59:49.997Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Spring/Pholymorphism/">Spring-Pholymorphism</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="다형성"><a href="#다형성" class="headerlink" title="다형성"></a>다형성</h1><h2 id="디폴트-생성자가-하는-역할"><a href="#디폴트-생성자가-하는-역할" class="headerlink" title="디폴트 생성자가 하는 역할"></a>디폴트 생성자가 하는 역할</h2><ul>
<li>원래 생성자의 역할은 객체가 생성이 될 때 멤버변수의 값을 의미있는 값으로 초기화 할 때<br>Primitive Type은 그 타입의 디폴트 값으로 초기화가 되고, Reference Type은 null로 초기화가 된다.</li>
<li>생략해도되고, 기본적으로 있다고해서 디폴트 생성자가 아니라 멤버 변수를 디폴트 값으로 초기화 시키기 때문에 디폴트 생성자라고 부른다.</li>
</ul>
<h2 id="다형성을-적용하지-않은-예제"><a href="#다형성을-적용하지-않은-예제" class="headerlink" title="다형성을 적용하지 않은 예제"></a>다형성을 적용하지 않은 예제</h2><ul>
<li><p>예를 들어, 삼성티비와 엘지티비의 클래스를 따로따로 만든다고 했을 때, 다형성을 적용하지 않은 상태에서<br>개발자에게 맡기게 되면 각각 자신의 생각대로 메소드명도 정하고 마음대로 클래스를 만들게 된다.<br>그래서 통일되지 않은 상태이게 되고 삼성티비와 엘지티비를 강제할 수단이 없기 때문에<br>각각 메소드를 호출 할 때마다 삼성티비와 엘지티비에 구현되어있는 메소드명으로 바꿔서 호출을 해줘야 한다.</p>
</li>
<li><p>이러한 예는 유지보수가 어렵고, 객체 지향 프로그래밍이 아닌 절차 지향 프로그래밍이다.</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TvUser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SamsungTv tv = <span class="keyword">new</span> SamsungTv();</span><br><span class="line">        tv.powerOn();</span><br><span class="line">        tv.volumeUp();</span><br><span class="line">        tv.volumeDown();</span><br><span class="line">        tv.powerOff();</span><br><span class="line">        <span class="comment">// 객체지향스럽지 못함 유지보수가 어려워서</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SamsungTv</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SamsungTv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===&gt; Samsung TV 생성&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">powerOn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---전원 켠다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">powerOff</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---전원 끈다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">volumeUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---소리 올린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">volumeDown</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---소리 내린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LGTv</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LGTv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===&gt; LGTv 생성&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---전원 켠다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOff</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---전원 끈다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">soundUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---소리 올린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">soundDown</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---소리 내린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="다형성을-적용한-얘제"><a href="#다형성을-적용한-얘제" class="headerlink" title="다형성을 적용한 얘제"></a>다형성을 적용한 얘제</h2><ul>
<li>다형성 = 상속 + 메소드 Overriding + 형변환(절차 지향 언어에서 지원하지 않음) 유지보수가 편함! 원 인터페이스 멀티플 인플리멘테이션</li>
<li>자식 객체가 부모 타입으로 되는걸 묵시적 형변환</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Tv</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">powerOn</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">powerOff</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">volumeUp</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">volumeDown</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SamsungTv</span> <span class="keyword">implements</span> <span class="title">Tv</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SamsungTv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===&gt; Samsung TV 생성&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">powerOn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---전원 켠다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">powerOff</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---전원 끈다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">volumeUp</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---소리 올린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">volumeDown</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SamsungTv---소리 내린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LGTv</span> <span class="keyword">implements</span> <span class="title">Tv</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LGTv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===&gt; LGTv 생성&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">powerOn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---전원 켠다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">powerOff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---전원 끈다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">volumeUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---소리 올린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">volumeDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LGTv---소리 내린다.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TvUser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Tv tv = <span class="keyword">new</span> SamsungTv();</span><br><span class="line">        tv.powerOn();</span><br><span class="line">        tv.volumeUp();</span><br><span class="line">        tv.volumeDown();</span><br><span class="line">        tv.powerOff();</span><br><span class="line">        <span class="comment">// 이건 클라이언트에게 리모콘을 줘서 tv를 작동하라고 하는 것과 같다.</span></span><br><span class="line">        <span class="comment">// tv는 바껴도 리모콘은 안바뀌니깐 하나의 리모콘으로 여러개의 tv를 작동시킬 수 있다 이것이 다형성.</span></span><br><span class="line">        <span class="comment">// TvUser를 안건드리고 tv를 바꿀 수 있을까. --&gt; 디자인 패턴을 적용하면 된다.</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>이렇게 했을 때 객체를 생성해서 호출할 때 생성자만 바꿔주면 그에 맞는 메소드들이 호출되기 때문에<br>따로 메소드명을 일일히 바꿔주지 않아도 된다.</li>
<li>여기서 더 나아가서 TvUser 클래스를 건드리지 않고도 Tv를 바꿀 수 있는 방법은 뭐가 있을까 했을 때<br>디자인 패턴을 활용하는 것이다.</li>
</ul>
<h2 id="디자인-패턴을-활용한-다형성-예"><a href="#디자인-패턴을-활용한-다형성-예" class="headerlink" title="디자인 패턴을 활용한 다형성 예"></a>디자인 패턴을 활용한 다형성 예</h2><ul>
<li>각 티비 클래스는 비슷한 형태이니 생략하고 추가된 부분과 변경된 코드만 작성했다.</li>
<li>팩토리 디자인 패턴을 이용한 형태처럼 BeanFactory 클래스를 만들어 값이 입력될 때마다<br>입력 값에 맞는 객체들이 반환되서 TvUser 클래스의 Tv 객체에 대입 되게 만들어졌다. <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123; <span class="comment">// 객체 공장 팩토리 패턴활용</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getBean</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (id.equals(<span class="string">&quot;lg&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> LGTv();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(id.equals(<span class="string">&quot;samsung&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> SamsungTv();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(id.equals(<span class="string">&quot;google&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> GoogleTv();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.pholymorphism3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TvUser</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        BeanFactory factory = <span class="keyword">new</span> BeanFactory();</span><br><span class="line">        Tv tv = (Tv) factory.getBean(args[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        tv.powerOn();</span><br><span class="line">        tv.volumeUp();</span><br><span class="line">        tv.volumeDown();</span><br><span class="line">        tv.powerOff();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="프로그램-발전"><a href="#프로그램-발전" class="headerlink" title="프로그램 발전"></a>프로그램 발전</h3><ul>
<li><p>프로그램 개발 발전은 복사/붙여넣기로 시작이 되었다. 반복되는 코드들을 복사붙여넣기하니깐 너무많아 유지보수가 어려워서 생긴게</p>
</li>
<li><p>함수가 생김 함수를 기반으로 절차지향언어 c가 생김 반복적으로 사용하는 코드를 함수로 모듈화 시켜놓으면 그 코드가 필요하면 함수만 호출하면되니깐</p>
</li>
<li><p>반복되는 코드를 줄여나가게 되었고. 알고리즘만 재사용하니깐 재사용성이 좋아지면 좋겠다 해서 나온게 클래스이다.</p>
</li>
<li><p>클래스는 단순히 함수만 있는게 아니라 함수가 동작할 때 필요한 변수까지 가지고 있어서 재사용성이 점점 좋아지는 쪽으로 발전함.</p>
</li>
<li><p>클래스를 통째로 바꿔치기하면서 재사용을 하려면 다형성이라는게 필요하다! 그래서 객체지향언어의 핵심은 다형성이다.</p>
</li>
<li><p>다형성을 사용하지 않을꺼면 복잡한 객체지향언어를 사용할 필요가 없다.</p>
</li>
<li><p>다형성을 사용했더니 클라이언트가 소스수정이 필요하다 그래서 이 다형성을 한단계 뛰어넘는게 디자인 패턴이다.</p>
</li>
<li><p>팩토리 패턴을 사용하면 공장으로부터 원하는 것을 얻어낸다. 클라이언트는 유지 보수과정에서 수정되지 않는다.</p>
</li>
<li><p>클라이언트(main)만 봐서는 무슨 tv가 생성되는지 알수 없다. 클라이언트는 이렇게 작성되어야 한다.</p>
</li>
<li><p>구글 티비를 만들어서 그냥 프로그램 컨피규레이션에 google을 넣는다고 동작하지않음 빈팩토리에 분기를 만들어서 조건을 걸어줘야 동작이 된다.</p>
</li>
<li><p>소스를 수정하면 컴파일 다시 해야 하고 컴파일다시하면 서버에 다시 올려야한다. 소스수정을 최소화시키는 방향으로 생각해야한다.</p>
</li>
<li><p>다형성, 디자인 패턴를 써도 해결되지 않은 문제를 해결하는 것이 스프링프레임워크이다. *핵심은 유지보수할 때 자바소스를 안건드리는 것이다. 그래서 컴파일을 다시 할 필요가 없다.</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Spring/Pholymorphism/" data-id="ckhrac5fa00048cu23daj3k5p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/JSP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Spring/JSP/" class="article-date">
  <time datetime="2020-11-21T05:59:49.989Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Spring/JSP/">Spring-JSP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JSP-Java-Server-Page"><a href="#JSP-Java-Server-Page" class="headerlink" title="JSP(Java Server Page)"></a>JSP(Java Server Page)</h1><h2 id="JSP란"><a href="#JSP란" class="headerlink" title="JSP란?"></a>JSP란?</h2><ul>
<li>HTML내에 자바 코드를 삽입하여 웹 서버에서 동적으로 웹 페이지를 생성하여 웹 브라우저에 돌려주는 서버 사이드 스크립트 언어이다.<br>Java EE 스펙 중 일부로 웹 애플리케이션 서버에서 동작한다.</li>
</ul>
<h3 id="JSP의-등장이유"><a href="#JSP의-등장이유" class="headerlink" title="JSP의 등장이유"></a>JSP의 등장이유</h3><h4 id="서블릿의-단점"><a href="#서블릿의-단점" class="headerlink" title="서블릿의 단점"></a>서블릿의 단점</h4><ul>
<li><p>코드를 수정하면 다시 로딩이 될 때까지 기다려야 했다.</p>
</li>
<li><p>서블릿이 나오고 많은 곳에서 사용이 되었지만, 서블릿은 Web.XML에 설정들을 일일히 등록을 해줘야 했다.</p>
</li>
<li><p>자바코드에 HTML을 넣어서 작성을 해야하기 때문에 디자인 코드를 구현할 때 한줄한줄 출력 스트림(out.println())에 넣어서<br>구현을 했어야 했다. 작성하다보면 “” , ‘’ 을 구별해서 작성해야 해서 자바문법에 어긋나는 상황이 발생하기도 했다.<br>그래서 대규모 프로젝트에 사용하기에 굉장히 번거롭고 힘들었다.</p>
</li>
<li><p>위의 서블릿의 단점을 개선해서 등장한 것이 JSP이다.</p>
</li>
<li><p>작성해야 하는 코드가 더 간결해지고, Web.xml에 따로 설정을 등록을 안해도 되고, 수정후에 리로딩 없이 바로 브라웢에 적용이 된다.</p>
</li>
</ul>
<h3 id="JSP의-특징"><a href="#JSP의-특징" class="headerlink" title="JSP의 특징"></a>JSP의 특징</h3><ul>
<li>JSP는 서블릿의 단점을 개선하기 위해서 나온 언어여서 서블릿을 기반으로 동작이 이루어진다.<br>실행이 될 때 서블릿으로 변환이되서 실행이 된다.</li>
<li>그래서 오류가 나게 되면 로그에 서블릿 파일에 대한 로그가 남게 되서,<br>예로, 내가 작성한 JSP코드는 20줄인데 로그에는 서블릿 150라인에 오류가 났다 이렇게 보여지게 된다.</li>
<li>JSP로 작성한 코드가 실행될 때 서블릿의 service()에 들어가게 된다.</li>
</ul>
<h3 id="문법"><a href="#문법" class="headerlink" title="문법"></a>문법</h3><ul>
<li><p><code>&lt;% %&gt;</code>(Scriptlet) - Scriptlet은 정상적인 자바코드가 들어간다.</p>
</li>
<li><p><code>&lt;%= %&gt;</code>(Expression) - expression은 변수, 메소드 호출(리턴타입이 void가 아닌 뭔가를 리턴하는 메소드만 가능)이 들어갈 수 있다.<br>안에 <code>;</code>가 뒤에 들어가면 정상적인 자바코드로 인식해서 안된다 <code>;</code>없어야 한다. 여러줄의 코딩을 할 수 없다.</p>
</li>
<li><p>&lt;%– –%&gt; jsp 주석처리  - servlet으로 변환되지 않는다. (단축키 ctrl + shift + /) </p>
</li>
<li><p>&lt;! – –&gt; - html주석 servlet으로 변환될 때 포함이 된다.</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">import</span>=<span class="string">&quot;java.util.List&quot;</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">import</span>=<span class="string">&quot;com.rubypapper.biz.board.BoardDAO&quot;</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">import</span>=<span class="string">&quot;com.rubypapper.biz.board.BoardVO&quot;</span>%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%@page</span> <span class="attr">contentType</span>=<span class="string">&quot;text/html; charset=EUC-KR&quot;</span> %&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span></span></span><br><span class="line"><span class="tag">    //<span class="attr">1.</span> 사용자 입력 정보 추출(검색 기능은 숙제<span class="attr">...</span>)</span></span><br><span class="line"><span class="tag">    // <span class="attr">request.setCharacterEncoding</span>(&quot;<span class="attr">EUC-KR</span>&quot;);</span></span><br><span class="line"><span class="tag">    </span></span><br><span class="line"><span class="tag">    <span class="attr">String</span> <span class="attr">searchCondition</span> = <span class="string">request.getParameter(</span>&quot;<span class="attr">searchCondition</span>&quot;); </span></span><br><span class="line"><span class="tag">    <span class="attr">String</span> <span class="attr">searchKeyword</span> = <span class="string">request.getParameter(</span>&quot;<span class="attr">searchKeyword</span>&quot;);</span></span><br><span class="line"><span class="tag">    </span></span><br><span class="line"><span class="tag">    <span class="attr">if</span>(<span class="attr">searchCondition</span> == <span class="string">null)</span> <span class="attr">searchCondition</span> = <span class="string">&quot;TITLE&quot;</span>;</span></span><br><span class="line"><span class="tag">    <span class="attr">if</span>(<span class="attr">searchKeyword</span> == <span class="string">null)</span> <span class="attr">searchKeyword</span> = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="tag">    </span></span><br><span class="line"><span class="tag">    // <span class="attr">2.</span> <span class="attr">DB</span> 연동 처리</span></span><br><span class="line"><span class="tag">    <span class="attr">BoardVO</span> <span class="attr">vo</span> = <span class="string">new</span> <span class="attr">BoardVO</span>();</span></span><br><span class="line"><span class="tag">    <span class="attr">vo.setSerachCondition</span>(<span class="attr">searchCondition</span>);</span></span><br><span class="line"><span class="tag">    <span class="attr">vo.setSerachKeyword</span>(<span class="attr">searchKeyword</span>);</span></span><br><span class="line"><span class="tag">    </span></span><br><span class="line"><span class="tag">    <span class="attr">BoardDAO</span> <span class="attr">boardDAO</span> = <span class="string">new</span> <span class="attr">BoardDAO</span>();</span></span><br><span class="line">    List&lt;BoardVO&gt; boardList = boardDAO.getBoardList(vo);</span><br><span class="line">    // DB에서 글목록을 가져옴</span><br><span class="line">    </span><br><span class="line">    // 3. 응답 화면 구성</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&#x27;-//W3C//DTD HTML 4.01 Transitional//EN&#x27;</span> <span class="meta-string">&#x27;http://www.w3.org/TR/html4/loose.dtd&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&#x27;Content-Type&#x27;</span> <span class="attr">content</span>=<span class="string">&#x27;text/html; charset=EUC-KR&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>글 목록<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>게시글 목록<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            에이님 로그인 환영합니다...... <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;logout_proc.jsp&#x27;</span>&gt;</span>Log-out<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 검색 시작 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&#x27;getBoardList.jsp&#x27;</span> <span class="attr">method</span>=<span class="string">&#x27;post&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&#x27;1&#x27;</span> <span class="attr">cellpadding</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">cellspacing</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;700&#x27;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&#x27;right&#x27;</span>&gt;</span><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&#x27;searchCondition&#x27;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;TITLE&#x27;</span>&gt;</span>제목</span><br><span class="line">                            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;CONTENT&#x27;</span>&gt;</span>내용</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">select</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&#x27;searchKeyword&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;text&#x27;</span> /&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;submit&#x27;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">value</span>=<span class="string">&#x27;검색&#x27;</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 검색 종료 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&#x27;1&#x27;</span> <span class="attr">cellpadding</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">cellspacing</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;700&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;orange&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;100&#x27;</span>&gt;</span>번호<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;orange&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;200&#x27;</span>&gt;</span>제목<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;orange&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;150&#x27;</span>&gt;</span>작성자<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;orange&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;150&#x27;</span>&gt;</span>등록일<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">bgcolor</span>=<span class="string">&#x27;orange&#x27;</span> <span class="attr">width</span>=<span class="string">&#x27;100&#x27;</span>&gt;</span>조회수<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">%</span> <span class="attr">for</span>(<span class="attr">BoardVO</span> <span class="attr">board</span> <span class="attr">:boardList</span>) &#123; %&gt;</span> <span class="comment">&lt;!-- 따로 나눠서 처리해야함 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">board.getSeq</span>() %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&#x27;left&#x27;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;getBoard.jsp?seq=11&#x27;</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">board.getTitle</span>() %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">board.getWriter</span>() %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">board.getRegDate</span>() %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">board.getCnt</span>() %&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">%&#125;</span> %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;insertBoard.html&#x27;</span>&gt;</span>새글 등록<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Spring/JSP/" data-id="ckhrac5fb00058cu28qj6f516" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/JDBC" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Spring/JDBC/" class="article-date">
  <time datetime="2020-11-21T05:59:49.979Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Spring/JDBC/">Spring-JDBC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JDBC-Java-Database-Connectivity"><a href="#JDBC-Java-Database-Connectivity" class="headerlink" title="JDBC(Java Database Connectivity)"></a>JDBC(Java Database Connectivity)</h1><h2 id="JDBC란"><a href="#JDBC란" class="headerlink" title="JDBC란?"></a>JDBC란?</h2><ul>
<li>JDBC는 DBMS와의 연동을 위해 제공되는 자바 표준 API(java.sql) 이다.</li>
</ul>
<p><img src="/Java/documents/images/JDBC.jpg" alt="JDBC"></p>
<ul>
<li><p>JDBC 드라이버</p>
<ul>
<li>Java.sql 패키지의 interface를 구현한 클래스를 드라이버라고 한다.</li>
</ul>
<p><img src="/Java/documents/images/jdbcdriver.jpg" alt="JDBCDriver"></p>
</li>
<li><p>데이터베이스가 달라졌을 때 SQL은 DB에 맞게 수정해야 한다. 커넥션도 DB에 따라 다를 수 밖에 없음.<br>나머지 자바코드는 DB와 상관 없이 재사용 가능하다.</p>
</li>
<li><p>DB연동할 때 java.sql 패키지 클래스나 인터페이스를 이용해야한다. 인터페이스가 훨씬 많다.</p>
</li>
<li><p>인터페이스가 많다는건 jdbc도 내부적으로 다형성을 이용하고 있다라고 알면 된다.</p>
</li>
<li><p>특정 DB에 비 종속적인 자바코드를 유지할 수 있다.</p>
</li>
<li><p>JDBC API - java.sql 패키지, 인터페이스가 많음(리모콘) 이 인터페이스를 구현한게 JDBC Driver이다.</p>
<ul>
<li>이 드라이버는 DB벤더 개발자들이 드라이버를 개발한다. 최적화된 자바코드를 이용해서 개발한다.</li>
<li>그래서 드라이버는 db에 따라 달라질 수 있고 성능이 달라질 수 있다.</li>
<li>우리가 드라이버를 개발하는게 아니다. 그런데 여러 DB가 동일한 인터페이스를 상속했기 때문에 똑같은 메소드를 가지고 있다.</li>
<li>클라이언트가 (tv유저) 리모콘이라는 인터페이스를 통해서 오라클, mysql jdbc 드라이버인 lgtv, samsungtv가 동작한다.</li>
</ul>
</li>
<li><p>jar파일을 등록을해주면 인터페이스에 대한 구현클래스들을 확보하는 것이다(드라이버)</p>
<h3 id="JDBC-동작-원리"><a href="#JDBC-동작-원리" class="headerlink" title="JDBC 동작 원리"></a>JDBC 동작 원리</h3></li>
</ul>
<p><img src="/Java/documents/images/JDBC%EB%8F%99%EC%9E%91%EC%9B%90%EB%A6%AC.jpg" alt="JDBC동작원리"></p>
<h3 id="JDBC-구조"><a href="#JDBC-구조" class="headerlink" title="JDBC 구조"></a>JDBC 구조</h3><p><img src="/Java/documents/images/JDBC%EA%B5%AC%EC%A1%B0.png" alt="JDBC구조"></p>
<h3 id="JDBC-프로그램-절차"><a href="#JDBC-프로그램-절차" class="headerlink" title="JDBC 프로그램 절차"></a>JDBC 프로그램 절차</h3><ol>
<li><p>Driver 로딩</p>
<ul>
<li><code>DriverManager.registerDriver(new org.h2.Driver())</code>와 <code>Class.forName(&quot;org.h2.Driver&quot;)</code> 차이<ul>
<li><code>DriverManager.registerDriver(new org.h2.Driver())</code><ul>
<li>이것을 이용하면 이 클래스가 패키지에 없으면 아예 컴파일부터 안된다.</li>
<li>실행하기도 전에 클래스패스상에 존재하지 않는다고 인식한다. 그래서 h2 라이브러리를 등록을해줘야 한다.</li>
</ul>
</li>
<li><code>Class.forName(&quot;org.h2.Driver&quot;)</code><ul>
<li>문자열로 등록하는 방법 결과는 같음. 실제 프로젝트에선 간결해서 이걸 더 많이 쓴다.</li>
<li>문자열로 클래스경로를 찾아주면 똑같이 메모리 주소를 생성해서 올린다.</li>
<li>클래스이름에 오타가 있어도 컴파일이 되 버린다. 그래서 실행을 할 때 문제가 있다는걸 실행할 때 알려준다.</li>
<li>라이브러리가 없는데도 컴파일이 되버린다. 하지만 실행을 하면 h2관련 드라이버가 없으니깐 에러가 난다.</li>
</ul>
</li>
</ul>
</li>
<li>jar파일 안에서 org.h2 driver.class가 중요하다. new org.h2.Driver()를 등록한다.<ul>
<li>이걸 등록해서 연결할 때 h2드라이버로 연결을 해주는 것이다.</li>
</ul>
</li>
</ul>
</li>
<li><p>Connection 연결</p>
<ul>
<li>커넥션 획득할 때는 url, 아이디, 비밀번호가 일치해야한다.<ul>
<li>다른사람의 DB에 연결하고 싶을 때, 다른 사람의 IP주소를 세팅하면 된다.</li>
<li>IP주소는 유니크하기 때문에 로컬호스트는 유니크한것이다. 위에 url은 내 컴퓨터에 있는 h2데이터베이스와 연결한다는 것이다.</li>
<li>JDBC URL은 드라이버마다 다르다. JDBC URL은 DB 설치한 사람(DB관리자)한테 물어보면 된다.</li>
</ul>
</li>
</ul>
</li>
<li><p>Statement 생성</p>
</li>
<li><p>SQL 명령어 전송</p>
<ul>
<li>SQL을 담아서 DBMS로 보내는 작업이다.</li>
<li>INSERT, DELETE, UPDATE는 전송하는 메소드가 <code>executeUpdate()</code>로 같다.</li>
<li>SELECT는 <code>executeQuery()</code> 이다.</li>
</ul>
</li>
<li><p>검색 결과 처리(INSERT, UPDATE, DELETE 작업에서는 생략)</p>
</li>
<li><p>Connection 연결 해제</p>
</li>
</ol>
<ul>
<li>어디에 적용해도 1,2,3 번은 똑같다.</li>
</ul>
<h4 id="INSERT-DELETE-UPDATE-구현-예"><a href="#INSERT-DELETE-UPDATE-구현-예" class="headerlink" title="INSERT, DELETE, UPDATE 구현 예"></a>INSERT, DELETE, UPDATE 구현 예</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InsertBoardTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. 드라이버 객체를 메모리에 로딩한다.</span></span><br><span class="line">            <span class="comment">// DriverManager.registerDriver(new org.h2.Driver()); // 애를이용하면 이 클래스가 패키지에 없으면 아예 컴파일부터 안된다.</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 드라이버 매니저를 통해 특정 드라이버를 메모리에 올려야한다.</span></span><br><span class="line">            <span class="comment">// 우린 h2 드라이버를 메모리 로딩해야한다 그래야 이 드라이버로부터 연결을 얻을 수 있고</span></span><br><span class="line">            <span class="comment">// 연결로부터 스테이트먼트 클래스를 얻을 수 있다.</span></span><br><span class="line">            <span class="comment">// jar파일안에서 org.h2 driver.class가중요하다. new org.h2.Driver()를 등록한다</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 위아래는 기능적으로는 결과는 똑같지만, 특징들을 작성한 차이가 있다.</span></span><br><span class="line">            Class.forName(<span class="string">&quot;org.h2.Driver&quot;</span>); <span class="comment">// 문자열로 등록하는 방법 결과는 같음. 실제프로젝트에선 이걸 더 많이 씀 간결해서</span></span><br><span class="line">           </span><br><span class="line">            <span class="comment">// 2. 커넥션을 획득한다.</span></span><br><span class="line">            String url = <span class="string">&quot;jdbc:h2:tcp://localhost/~/test&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url, <span class="string">&quot;sa&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">// 연결 객체를 반환받는다.</span></span><br><span class="line">           </span><br><span class="line">            <span class="comment">// 3. SQL전달 객체(Statement)를 생성한다.</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. SQL을 전송한다.</span></span><br><span class="line">            String sql = <span class="string">&quot;insert into board(seq, title, writer, content) values(3, &#x27;테스트 제목&#x27;, &#x27;테스터&#x27;, &#x27;테스트 내용...&#x27;)&quot;</span>;</span><br><span class="line">            <span class="comment">// String sql = &quot;insert into board(seq, title, writer, content) values((select nvl(max(seq), 0) + 1 from board), &#x27;테스트 제목&#x27;, &#x27;테스터&#x27;, &#x27;테스트 내용...&#x27;)&quot;;</span></span><br><span class="line">            <span class="comment">// null 에대한 비교연산은 false이다 비교를 못함</span></span><br><span class="line">            <span class="comment">// select nvl(max(seq), 0) + 1 from board; nvl은 nonvalue에 약자 최대값이 null이 나오면 0 으로 바꾸라는 의미</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> cnt = stmt.executeUpdate(sql); <span class="comment">// dbms에 전송한다</span></span><br><span class="line">            System.out.println(cnt + <span class="string">&quot;건의 데이터 처리 성공!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="comment">// 등록 수정 삭제는 resultset을 사용하지 않기 때문에 stmt, conn만 닫아주면 된다.</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)</span><br><span class="line">                 stmt.close();</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                stmt = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">if</span>(!conn.isClosed() &amp;&amp; conn != <span class="keyword">null</span>) <span class="comment">// 커넥션이 닫힌게 아니라면 이조건을 실행해라.</span></span><br><span class="line">                 conn.close();</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                conn = <span class="keyword">null</span>;</span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SELECT-구현-예"><a href="#SELECT-구현-예" class="headerlink" title="SELECT 구현 예"></a>SELECT 구현 예</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetBoardListTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. 드라이버 객체를 메모리에 로딩한다.</span></span><br><span class="line">            <span class="comment">// DriverManager.registerDriver(new org.h2.Driver()); // 애를 이용하면 이 클래스가 패키지에 없으면 아예 컴파일부터 안된다.</span></span><br><span class="line"></span><br><span class="line">            Class.forName(<span class="string">&quot;org.h2.Driver&quot;</span>); <span class="comment">// 문자열로 등록하는 방법 결과는 같음. 실제프로젝트에선 이걸 더 많이 씀 간결해서</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2. 커넥션을 획득한다.</span></span><br><span class="line">            String url = <span class="string">&quot;jdbc:h2:tcp://localhost/~/test&quot;</span>;</span><br><span class="line">            conn = DriverManager.getConnection(url, <span class="string">&quot;sa&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">// 연결 객체를 반환받는다.</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. SQL전달 객체(Statement)를 생성한다.</span></span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4. SQL을 전송한다.</span></span><br><span class="line">            String sql = <span class="string">&quot;select * from board order by seq desc&quot;</span>;</span><br><span class="line">            rs = stmt.executeQuery(sql); <span class="comment">// select 전용 메소드 rs으로 반환함. 결과 집합</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 5. 검색 결과 처리(SELECT 구문에 한하여 해당된다.)</span></span><br><span class="line">            System.out.println(<span class="string">&quot;[ BOARD LIST ]&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getInt(<span class="string">&quot;SEQ&quot;</span>) + <span class="string">&quot; : &quot;</span>);</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;TITLE&quot;</span>) + <span class="string">&quot; : &quot;</span>);</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;WRITER&quot;</span>) + <span class="string">&quot; : &quot;</span>);</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;CONTENT&quot;</span>) + <span class="string">&quot; : &quot;</span>);</span><br><span class="line">                System.out.println(rs.getDate(<span class="string">&quot;REGDATE&quot;</span>) + <span class="string">&quot; : &quot;</span>);</span><br><span class="line">                System.out.println(rs.getInt(<span class="string">&quot;CNT&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">              <span class="keyword">if</span>(rs != <span class="keyword">null</span>)</span><br><span class="line">                  rs.close();</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                rs = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">              <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)</span><br><span class="line">                 stmt.close();</span><br><span class="line"></span><br><span class="line">           &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line"></span><br><span class="line">           &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">               stmt = <span class="keyword">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">             <span class="keyword">if</span>(!conn.isClosed() &amp;&amp; conn != <span class="keyword">null</span>) <span class="comment">// 커넥션이 닫힌게 아니라면 이조건을 실행해라.</span></span><br><span class="line">                conn.close();</span><br><span class="line"></span><br><span class="line">           &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line"></span><br><span class="line">           &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">               conn = <span class="keyword">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>어플리케이션이 있고 DB가 있는데 문자열로된 SQL을 DBMS로 보내주는건데 어플리케이션을 서울이라고 보고 DB를 부산이라고 했을 때</li>
<li>이 SQL이 사람이라고 치면 사람이 부산까지 걸어갈 수 없으니 고속도로를 뚫어야한다 이 도로가 커넥션 서울과 부산이 연결되어 있다는 것</li>
<li>커넥션이 될려면 URL, ID, PW가 있어야 한다.  대전이랑 연결할려면 연결이 달라져야한다.</li>
<li>고속도로가 뚫려도 자동차가 필요하다 자동차가 Statement이다.</li>
<li>자동차에 사람(sql)을 태워서 부산으로 보내는게  stmt.executeUpdate(sql)이 작업이다. 이것이 jdbc이다.</li>
<li>고속도로 뚫는다 자동차를 만든다 자동차에 사람을 태워 부산으로 보낸다.</li>
</ul>
<h4 id="Result-Set"><a href="#Result-Set" class="headerlink" title="Result Set"></a>Result Set</h4><p><img src="/Java/documents/images/ResultSet.jpg" alt="Result Set"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* Before First(as B.F), After Last(as A.L)는 데이터가 없는 칸이다. </span><br><span class="line">* B.F에 커서가 존재한다. rs.next를 호출하면 커서를 밑으로 한칸 내려준다.</span><br><span class="line">* 리턴타입이 불린이다. 읽을 데이터가 있으면 true가 되고 출력하고 아래로 내려간다.</span><br><span class="line">* 그리고 또 데이터를 출력한다. 그리고 커서가 아래로 이동한다 그럼 A.L로 이동해서</span><br><span class="line">* 읽을 값이 없어서 false 가 되서 반복문을 벗어난다.</span><br><span class="line">*</span><br><span class="line">* 반복문을 없애고 각 커서를 읽으려고 하면 데이터가 없는 영역이라고 에러가 뜬다.</span><br><span class="line">* rs.next가 실행되어야 커서가 아래로 내려가는 것이다. 그래야 하나의 로우정보를 읽을 수 있음.</span><br><span class="line">* 더이상 읽을 데이터가 없을 때까지 while문으로 rs.next를 사용하여 내려주는 것이다.</span><br><span class="line">*</span><br><span class="line">* 데이터 타입에 따라 사용하는 메소드가 달라져야한다.(getXXX()) 컬럼은 대소문자를 구분하지 않는다.</span><br><span class="line">* 중요한건 컬럼이름을 모른다면, getInt(1) 처럼 컬럼위 위치를 넣을 수 있다 그런데 이러면 가독성이 떨어짐...</span><br><span class="line">* 가급적 컬럼이름을 써라. 대소문자를 구분하진 않지만 대문자를 쓰는게 가독성 측면에서 좋다.</span><br><span class="line">* 컬럼의 순서는 안맞춰도 되지만 가급적 맞추는게 좋다.</span><br></pre></td></tr></table></figure>

<h4 id="리소스-닫기-Coonection-close"><a href="#리소스-닫기-Coonection-close" class="headerlink" title="리소스 닫기(Coonection close)"></a>리소스 닫기(Coonection close)</h4><ul>
<li>이렇게 하면 rs.close()에서 에러가 뜨면 catch 로 넘어가서 stmt, conn close()가 실행 되지 않아서 에러가 뜬다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">      rs.close();</span><br><span class="line">      stmt.close();</span><br><span class="line">      conn.close();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>이렇게 해야 한다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(rs != <span class="keyword">null</span>)</span><br><span class="line">        rs.close();</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">    rs = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)</span><br><span class="line">        stmt.close();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    stmt = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!conn.isClosed() &amp;&amp; conn != <span class="keyword">null</span>) <span class="comment">// 커넥션이 닫힌게 아니라면 이조건을 실행해라.</span></span><br><span class="line">        conn.close();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    conn = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>입출력 스트림을 할 때 다끝나면 입출력스트림을 꼭 닫아줘야한다.</li>
<li>이 커넥션은 굉장히 중요하다. 안그러면 다른 어플리케이션에서 커넥션을 못 맺는다.</li>
<li>안 끊는다고 실행이 안되는건 아닌데 웹에서 여러명이 db연동을 하기 때문에 중요함.</li>
<li>커넥션은 커넥션 statement, resultset 순으로해서 close()를 할 때도 역순으로 닫아야 한다.</li>
<li>등록 수정 삭제는 resultset을 사용하지 않기 때문에 stmt, conn만 닫아주면 된다.</li>
</ul>
<h3 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h3><ul>
<li><p>Statement보다 SQL처리 속도가 5배 이상 빨라서 이걸 사용 하면 된다.</p>
</li>
<li><p>DB에서 SQL이 들어올 때 가장 먼저 확인하는 것이 문법체크와 오브젝트를 확인하는 것이다.<br>SQL이 들어올 때마다 이러한 작업들을 계속해서 수행해야 하나는데 <code>PreparedStatement</code>를 사용 하게 되면<br>한 번 SQL을 사용해서 보내 놓으면 그 다음부터는 문법체크와 오브젝트 확인에 대한 작업들을 실행하지 않는다.<br>그래서 일단 ?로 값을 채워 넣고 동적으로 setXXX()를 사용하여 값을 넣어서 사용할 수 있다.<br>문법체크와 오브젝트를 확인하는 일에 대해서 한번 이후에 계속해서 실행시키지 않기 때문에<br>속도가 더 빠른 것이다. </p>
</li>
<li><p>Statement와 차이점</p>
<ul>
<li><code>String sql = &quot;select * from users where id = ? and password = ?&quot;;</code> - 파라미터를 ?로 작성한다.</li>
<li><code>stmt = conn.prepareStatement(sql);</code> - 여기서 ()안에 sql을 넣어줘야 한다.</li>
<li><code>stmt.setString(1, &quot;admin&quot;)</code>, <code>stmt.setString(2, &quot;admin&quot;)</code> - 파라미터 ? 에 순서대로 1,2 번호를 넣고 해당하는 값을 넣는다.</li>
<li><code>rs = stmt.executeQuery();</code> - sql을 빼고 작성하면 된다.</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.h2.util.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rubypapper.biz.common.JDBCUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetUserTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// JDBC API 선언</span></span><br><span class="line">        Connection conn = <span class="keyword">null</span>; <span class="comment">// 고속도로</span></span><br><span class="line"><span class="comment">//        Statement stmt = null; // 자동차 </span></span><br><span class="line">        PreparedStatement stmt = <span class="keyword">null</span>; <span class="comment">// 자동차(페라리) statement보다 sql처리속도가 5배 이상 빠르다. 무조건 써라.</span></span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>; <span class="comment">// 검색 결과 저장</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 2.Connection 객체를 획득한다.</span></span><br><span class="line">            conn = JDBCUtil.getConnection(); <span class="comment">// static 메소드니깐 바로 접근이 가능하다.</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 3. Statement 객체를 획득한다.</span></span><br><span class="line">            String sql = <span class="string">&quot;select * from users where id = ? and password = ?&quot;</span>;</span><br><span class="line">            stmt = conn.prepareStatement(sql);<span class="comment">// 프리페얼드는 여기에 sql이 들어감 그리고 파라미터가 ?로 바뀐다. exe여기에 sql이 빠짐</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ? 파라미터에 값  설정</span></span><br><span class="line">            stmt.setString(<span class="number">1</span>, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">            stmt.setString(<span class="number">2</span>, <span class="string">&quot;admin&quot;</span>);  <span class="comment">// 결과가 달라지는게 아니라 성능이 더 좋아진다.</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 4. SQL 구문을 DB에 전송한다.</span></span><br><span class="line">            </span><br><span class="line">            rs = stmt.executeQuery();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 5. 검색 결과 처리</span></span><br><span class="line">            <span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;아이디 : &quot;</span> + rs.getString(<span class="string">&quot;ID&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;비번 : &quot;</span> + rs.getString(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;이름 : &quot;</span> + rs.getString(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;권한 : &quot;</span> + rs.getString(<span class="string">&quot;ROLE&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.close(rs, stmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Refactoring"><a href="#Refactoring" class="headerlink" title="Refactoring"></a>Refactoring</h2><ul>
<li>처음엔 정말 그대로 각 클래스에서 기능을 처리하도록 만들었었는데, 이렇게 작성했을 때 유지보수성이 안좋았다.<br>그래서 다음으로 JDBCUtil로 공통적으로 사용하는 코드들을 새로운 클래스에 만들어서 호출하는 방식으로 해서 유지보수성을 높였는데,<br>거기서 더 나아가서 데이터베이스에 접근할 수 있는 DAO 클래스와 전달되는 객체 VO를 만들어서 한 번더 리팩토링을 했다.</li>
<li>순서대로 Refactoring 해가는 과정 코드들을 적었다.</li>
</ul>
<h3 id="1-JDBCUtil-클래스를-만들어서-리팩토링"><a href="#1-JDBCUtil-클래스를-만들어서-리팩토링" class="headerlink" title="1. JDBCUtil 클래스를 만들어서 리팩토링"></a>1. JDBCUtil 클래스를 만들어서 리팩토링</h3><ul>
<li>InsertBoardTest 클래스<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InertBoardTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>; PreparedStatement stmt = <span class="keyword">null</span>;</span><br><span class="line">                  </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="comment">// JDBUCUtil에 1,2 번 과정이 들어가있어서 호출해서 사용.</span></span><br><span class="line">         conn = JDBCUtil.getConnection();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3. SQL 전달 객체를 생성한다.</span></span><br><span class="line">        <span class="comment">// String sql = &quot;insert into board(seq, title, writer, content) values((select nvl(max(seq), 0) + 1 from board), ?, ?, ?)&quot;;</span></span><br><span class="line">        stmt = conn.prepareStatement(sql);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 파라미터 세팅 stmt.setString(1, &quot;JDBC 제목 &quot;); stmt.setString(2, &quot;테스터&quot;);</span></span><br><span class="line">        stmt.setString(<span class="number">3</span>, <span class="string">&quot;JDBC 내용...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4. SQL 전송        </span></span><br><span class="line">        <span class="keyword">int</span> cnt = stmt.executeUpdate(); </span><br><span class="line">        System.out.println(cnt + <span class="string">&quot;건의 데이터 처리 성공!&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123; </span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123; </span><br><span class="line">          JDBCUtil.close(stmt, conn); </span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>JDBCUtil 클래스<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.common;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 자원 연결</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. 드라이버 객체를 메모리에 로딩한다.</span></span><br><span class="line">            Class.forName(<span class="string">&quot;org.h2.Driver&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 2.Connection 객체를 획득한다.</span></span><br><span class="line">            <span class="keyword">return</span> DriverManager.getConnection(<span class="string">&quot;jdbc:h2:tcp://localhost/~/test&quot;</span>,<span class="string">&quot;sa&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;            </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// select 기능의 자원 해제</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, PreparedStatement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 6. Connection 연결 해제 close 순서 ResultSet-&gt; Statement -&gt; Connection</span></span><br><span class="line">           <span class="keyword">try</span>&#123;</span><br><span class="line">             <span class="keyword">if</span>(rs != <span class="keyword">null</span>)</span><br><span class="line">                 rs.close();</span><br><span class="line">         &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">             rs = <span class="keyword">null</span>;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">             <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)</span><br><span class="line">                 stmt.close();</span><br><span class="line">         &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">             stmt = <span class="keyword">null</span>;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">             <span class="keyword">if</span>(!conn.isClosed() &amp;&amp; conn != <span class="keyword">null</span>) <span class="comment">// 커넥션이 닫힌게 아니라면 이조건을 실행해라.</span></span><br><span class="line">                 conn.close();</span><br><span class="line">         &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">             conn = <span class="keyword">null</span>;</span><br><span class="line">         &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// select외의 기능의 자원 해제</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(PreparedStatement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 6. Connection 연결 해제 close 순서 Statement -&gt; Connection</span></span><br><span class="line"></span><br><span class="line">             <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">                 <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)</span><br><span class="line">                     stmt.close();</span><br><span class="line">             &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                 e.printStackTrace();</span><br><span class="line">             &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                 stmt = <span class="keyword">null</span>;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">             <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">                 <span class="keyword">if</span>(!conn.isClosed() &amp;&amp; conn != <span class="keyword">null</span>) <span class="comment">// 커넥션이 닫힌게 아니라면 이조건을 실행해라.</span></span><br><span class="line">                     conn.close();</span><br><span class="line">             &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">                 e.printStackTrace();</span><br><span class="line">             &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                 conn = <span class="keyword">null</span>;</span><br><span class="line">             &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="DAO-VO를-이용한-리팩토링"><a href="#DAO-VO를-이용한-리팩토링" class="headerlink" title="DAO, VO를 이용한 리팩토링"></a>DAO, VO를 이용한 리팩토링</h3><ul>
<li>만약 인서트쿼리를 처리하고 하고 바로 조회를 하거나, 업데이트를 하고 바로 조회를 할려고 구현을 할 때<br>그냥 코드를 직접 넣으면 코드가 길어지고 지저분해 보이게 되고, JDBCUtil을 사용해도 번거로워지는 부분이 생긴다. 이 때 DAO를 만들면 된다.</li>
<li>boardDao만 작성 했을 때 문제점 <ul>
<li>문제1. 처음 볼 때 들어가는 값이 제목인지 컨텐트인지 모른다. 이 메소드를 들어가봐야 의미를 파악할 수 있다.</li>
<li>문제2. 파라미터의 타입과 순서만 맞으면 데이터가 잘 못 입력되어도 들어가게 된다. </li>
<li>에러가 뜨고 컴파일 오류가 뜨면 다행인데 안뜨고 잘 못 들어가면 문제가 된다.</li>
<li>그래서 VO도 함께 만들어서 데이터를 처리하면 된다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InertBoardTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. 글 등록 기능 처리</span></span><br><span class="line">        BoardDAO boardDAO = <span class="keyword">new</span> BoardDAO();</span><br><span class="line">        </span><br><span class="line">        BoardVO vo = <span class="keyword">new</span> BoardVO();</span><br><span class="line">        vo.setTitle(<span class="string">&quot;VO 테스트&quot;</span>);</span><br><span class="line">        vo.setTitle(<span class="string">&quot;테스터&quot;</span>);</span><br><span class="line">        vo.setTitle(<span class="string">&quot;VO 내용.....&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        boardDAO.insertBoard(vo); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. 글 목록 검색 기능 처리</span></span><br><span class="line">        boardDAO.getBoardList();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>DAO<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rubypapper.biz.common.JDBCUtil;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DAO(Data Access Object) 클래스</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardDAO</span> </span>&#123;</span><br><span class="line">    <span class="comment">// JDBC 관련 변수 선언</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Connection conn;</span><br><span class="line">    <span class="keyword">private</span> PreparedStatement stmt;</span><br><span class="line">    <span class="keyword">private</span> ResultSet rs;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// BOARD 테이블 관련 SQL 명령어</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BOARD_INSERT = <span class="string">&quot;INSERT INTO BOARD(SEQ, TITLE, WRITER, CONTENT) VALUES((SELECT NVL(MAX(SEQ),0)  + 1 FROM BOARD), ?, ?, ?)&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BOARD_UPDATE = <span class="string">&quot;UPDATE BOARD SET TITLE=?, CONTENT=? WHERE SEQ=?&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BOARD_DELETE = <span class="string">&quot;DELETE BOARD WHERE SEQ=?&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BOARD_GET = <span class="string">&quot;SELECT * FROM BOARD WHERE SEQ=?&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BOARD_LIST = <span class="string">&quot;SELECT * FROM BOARD ORDER BY SEQ DESC&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// BOARD 테이블 관련 CRUD 기능의 메소드</span></span><br><span class="line">    <span class="comment">// 글 등록</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertBoard</span><span class="params">(BoardVO vo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtil.getConnection();</span><br><span class="line">            stmt = conn.prepareStatement(BOARD_INSERT); <span class="comment">// sql이 완성되지 않았다 ?로 넣었기 때문에.</span></span><br><span class="line">            </span><br><span class="line">            stmt.setString(<span class="number">1</span>, vo.getTitle()); <span class="comment">// sql 세팅 값을 넣어줌.</span></span><br><span class="line">            stmt.setString(<span class="number">2</span>, vo.getWriter());</span><br><span class="line">            stmt.setString(<span class="number">3</span>, vo.getContent());</span><br><span class="line">            </span><br><span class="line"><span class="comment">//            stmt.setString(1, title); // sql 세팅 값을 넣어줌.</span></span><br><span class="line"><span class="comment">//            stmt.setString(2, writer);</span></span><br><span class="line"><span class="comment">//            stmt.setString(3, content);</span></span><br><span class="line">            </span><br><span class="line">            stmt.executeUpdate();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.close(stmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 글 수정</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateBoard</span><span class="params">(BoardVO vo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtil.getConnection();</span><br><span class="line">            stmt = conn.prepareStatement(BOARD_UPDATE);</span><br><span class="line">            </span><br><span class="line">            stmt.setString(<span class="number">1</span>, vo.getTitle()); <span class="comment">// sql 세팅 값을 넣어줌.</span></span><br><span class="line">            stmt.setString(<span class="number">2</span>, vo.getWriter());</span><br><span class="line">            stmt.setString(<span class="number">3</span>, vo.getContent());</span><br><span class="line">            </span><br><span class="line"><span class="comment">//            stmt.setString(1, title); // sql 세팅 값을 넣어줌.</span></span><br><span class="line"><span class="comment">//            stmt.setString(2, content);</span></span><br><span class="line"><span class="comment">//            stmt.setInt(3, seq);</span></span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            stmt.executeUpdate();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.close(stmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 글 삭제  나중에 유지보수할 때 int seq로작성했을때는 비밀번호도 필요하고그런 필요한 상황이 생겼을대 하나하나 넣어줘야 한다 그래서 vo를 통째로 넣는게 일관성 면에서도 좋다. 유지보수할 때 수정할 필요가 없어진다.</span></span><br><span class="line">    <span class="comment">// 지금은 메모리에 대한 걱정은 없어져서 vo를 통째로 넣어도 성능적으로 문제가 되지 않는다.</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteBoard</span><span class="params">(BoardVO vo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtil.getConnection();</span><br><span class="line">            stmt = conn.prepareStatement(BOARD_DELETE);</span><br><span class="line">            </span><br><span class="line">            stmt.setInt(<span class="number">1</span>, vo.getSeq());</span><br><span class="line">            </span><br><span class="line">            stmt.executeUpdate();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.close(stmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 글 상세 조회</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BoardVO <span class="title">getBoard</span><span class="params">(BoardVO vo)</span> </span>&#123;</span><br><span class="line">        BoardVO board = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtil.getConnection();</span><br><span class="line">            stmt = conn.prepareStatement(BOARD_GET);</span><br><span class="line">            </span><br><span class="line">            stmt.setInt(<span class="number">1</span>, vo.getSeq());</span><br><span class="line">            </span><br><span class="line">            rs= stmt.executeQuery();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                <span class="comment">// 검색 결과 한건을 BoardVO 객체를 매핑한다.</span></span><br><span class="line">                board = <span class="keyword">new</span> BoardVO();</span><br><span class="line">                board.setSeq(rs.getInt(<span class="string">&quot;SEQ&quot;</span>));</span><br><span class="line">                board.setTitle(rs.getString(<span class="string">&quot;TITLE&quot;</span>));</span><br><span class="line">                board.setWriter(rs.getString(<span class="string">&quot;WRITER&quot;</span>));</span><br><span class="line">                board.setContent(rs.getString(<span class="string">&quot;CONTENT&quot;</span>));</span><br><span class="line">                board.setRegDate(rs.getDate(<span class="string">&quot;REGDATE&quot;</span>));</span><br><span class="line">                board.setCnt(rs.getInt(<span class="string">&quot;CNT&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.close(rs, stmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> board;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 글 목록 검색</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;BoardVO&gt; <span class="title">getBoardList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 비어있는 리스트 컬렉션을 생성한다.</span></span><br><span class="line">        List&lt;BoardVO&gt; boardList = <span class="keyword">new</span> ArrayList&lt;BoardVO&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtil.getConnection();</span><br><span class="line">            stmt = conn.prepareStatement(BOARD_LIST);</span><br><span class="line">            </span><br><span class="line">            rs = stmt.executeQuery();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="comment">// 검색 결과 한 row당 하나의 BoardVO 객체를 매핑한다.                </span></span><br><span class="line">                BoardVO  board = <span class="keyword">new</span> BoardVO();</span><br><span class="line">                board.setSeq(rs.getInt(<span class="string">&quot;SEQ&quot;</span>));</span><br><span class="line">                board.setTitle(rs.getString(<span class="string">&quot;TITLE&quot;</span>));</span><br><span class="line">                board.setWriter(rs.getString(<span class="string">&quot;WRITER&quot;</span>));</span><br><span class="line">                board.setContent(rs.getString(<span class="string">&quot;CONTENT&quot;</span>));</span><br><span class="line">                board.setRegDate(rs.getDate(<span class="string">&quot;REGDATE&quot;</span>));</span><br><span class="line">                board.setCnt(rs.getInt(<span class="string">&quot;CNT&quot;</span>));</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// 검색 결과가 매핑된 BoardVO 객체를 리스트 컬렉션에 등록한다.</span></span><br><span class="line">                boardList.add(board);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtil.close(rs, stmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 검색 결과가 저장된 리스트 컬렉션을 클라이언트로 리턴한다.</span></span><br><span class="line">        <span class="keyword">return</span> boardList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>VO<ul>
<li>VO, DTO 등의 클래스를 만들 때 새로온 변수를 추가하거나, getter/setter 메소드를 계속해서 생성해줘야 하고 변경되면 또 하나하나 변경해줘야 한다.<br>이러한 번거로움을 줄이기 위해서 <code>Lombok</code> 이라는 라이브러리를 사용하면 getter/setter같은 메소드를 자동으로 생성해준다.</li>
<li><code>@Data</code> 를 사용하면 필요한 모든 기능들을 포함해서 적용해준다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">// VO(Value Object) 클래스</span></span><br><span class="line"><span class="comment">/*@Getter</span></span><br><span class="line"><span class="comment">@NoArgsConstructor</span></span><br><span class="line"><span class="comment">@AllArgsConstructor</span></span><br><span class="line"><span class="comment">@ToString</span></span><br><span class="line"><span class="comment">@EqualsAndHashCode*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardVO</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 테이블의 컬럼 이름(데이터 타입까지)과 동일한 멤버변수를 private로 선언한다.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> seq;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String writer;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Date regDate;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="중요"><a href="#중요" class="headerlink" title="중요!!!"></a>중요!!!</h3><ul>
<li>글 목록 조회나, 글 상세 조회 기능 같은 SELECT 쿼리를 사용해서 보여주는 기능들은 DAO에서 바로<br>출력하도록 하면 안되고, 객체를 넘겨줘서 이 메소드를 사용하는 클라이언트(메소드를 호출하는 메소드,객체)에서<br>결정해서 사용하도록 설계를 해야 한다!!  </li>
<li>select 안에서는 검색 결과를 처리하면 안된다. 메소드를 호출한 쪽에 검색 결과를 리턴 해줘야한다<br>그래서 클라이언트가 글 목록을 뿌릴지 데이터가 몇 개인지를 뿌릴지 결정하게 해야한다.</li>
</ul>
<h4 id="DAO의-글-상세조회-글-목록-조회-메소드"><a href="#DAO의-글-상세조회-글-목록-조회-메소드" class="headerlink" title="DAO의 글 상세조회, 글 목록 조회 메소드"></a>DAO의 글 상세조회, 글 목록 조회 메소드</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 글 상세 조회</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> BoardVO <span class="title">getBoard</span><span class="params">(BoardVO vo)</span> </span>&#123;</span><br><span class="line">    BoardVO board = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCUtil.getConnection();</span><br><span class="line">        stmt = conn.prepareStatement(BOARD_GET);</span><br><span class="line">        </span><br><span class="line">        stmt.setInt(<span class="number">1</span>, vo.getSeq());</span><br><span class="line">        </span><br><span class="line">        rs= stmt.executeQuery();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 검색 결과 한건을 BoardVO 객체를 매핑한다.</span></span><br><span class="line">            board = <span class="keyword">new</span> BoardVO();</span><br><span class="line">            board.setSeq(rs.getInt(<span class="string">&quot;SEQ&quot;</span>));</span><br><span class="line">            board.setTitle(rs.getString(<span class="string">&quot;TITLE&quot;</span>));</span><br><span class="line">            board.setWriter(rs.getString(<span class="string">&quot;WRITER&quot;</span>));</span><br><span class="line">            board.setContent(rs.getString(<span class="string">&quot;CONTENT&quot;</span>));</span><br><span class="line">            board.setRegDate(rs.getDate(<span class="string">&quot;REGDATE&quot;</span>));</span><br><span class="line">            board.setCnt(rs.getInt(<span class="string">&quot;CNT&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtil.close(rs, stmt, conn);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> board;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 글 목록 검색</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;BoardVO&gt; <span class="title">getBoardList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 비어있는 리스트 컬렉션을 생성한다.</span></span><br><span class="line">    List&lt;BoardVO&gt; boardList = <span class="keyword">new</span> ArrayList&lt;BoardVO&gt;();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCUtil.getConnection();</span><br><span class="line">        stmt = conn.prepareStatement(BOARD_LIST);</span><br><span class="line">        </span><br><span class="line">        rs = stmt.executeQuery();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">            <span class="comment">// 검색 결과 한 row당 하나의 BoardVO 객체를 매핑한다.</span></span><br><span class="line">            </span><br><span class="line">            BoardVO  board = <span class="keyword">new</span> BoardVO();</span><br><span class="line">            board.setSeq(rs.getInt(<span class="string">&quot;SEQ&quot;</span>));</span><br><span class="line">            board.setTitle(rs.getString(<span class="string">&quot;TITLE&quot;</span>));</span><br><span class="line">            board.setWriter(rs.getString(<span class="string">&quot;WRITER&quot;</span>));</span><br><span class="line">            board.setContent(rs.getString(<span class="string">&quot;CONTENT&quot;</span>));</span><br><span class="line">            board.setRegDate(rs.getDate(<span class="string">&quot;REGDATE&quot;</span>));</span><br><span class="line">            board.setCnt(rs.getInt(<span class="string">&quot;CNT&quot;</span>));</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 검색 결과가 매핑된 BoardVO 객체를 리스트 컬렉션에 등록한다.</span></span><br><span class="line">            boardList.add(board);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtil.close(rs, stmt, conn);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 검색 결과가 저장된 리스트 컬렉션을 클라이언트로 리턴한다.</span></span><br><span class="line">    <span class="keyword">return</span> boardList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="GetBoardTest-클라이언트"><a href="#GetBoardTest-클라이언트" class="headerlink" title="GetBoardTest(클라이언트)"></a>GetBoardTest(클라이언트)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.rubypapper.biz.board;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetBoardListTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. 글 목록 조회 기능 처리</span></span><br><span class="line">        BoardDAO boardDAO = <span class="keyword">new</span> BoardDAO();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// getBoardList() 메소드가 리턴한 글 목록을 원하는 형태로 사용한다.</span></span><br><span class="line">        List&lt;BoardVO&gt; boardList =boardDAO.getBoardList();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// select 기능의 메소드는 절대 return타입이 void이면 안된다 결과를 클라이언트에게 보내줘야 한다.</span></span><br><span class="line">        <span class="comment">// 어떻게 쓸지는 클라이언트가 결정해야지 dao가 결정하면 안된다!!! 중요!!!!!</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1. CASE 글 목록을 출력</span></span><br><span class="line">        System.out.println(<span class="string">&quot;[ BOARD LIST ]&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (BoardVO board : boardList) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;----&gt;&quot;</span> + board.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2. CASE</span></span><br><span class="line">        System.out.println(<span class="string">&quot;검색된 게시글 수 : &quot;</span> + boardList.size());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>클라이언트 - 한 객체의 메소드(a)안에서 다른 객체가 가지고 있는 메소드(b)를 호출할때<br>b 입장에서 애를 사용하는 클라이언트는 a가 된다. <ul>
<li>객체에 한에서 클라이언트는 나를 사용하는 누군가를 클라이언트라한다.        </li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Spring/JDBC/" data-id="ckhrac5jt002v8cu2e378e5mn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/HTTP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Spring/HTTP/" class="article-date">
  <time datetime="2020-11-21T05:59:49.970Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Spring/HTTP/">Spring-HTTP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="클라이언트-웹-WAS"><a href="#클라이언트-웹-WAS" class="headerlink" title="클라이언트, 웹, WAS"></a>클라이언트, 웹, WAS</h2><ul>
<li><p>클라이언트 - 서비스를 이용하는 사람, 웹 프로그래밍 관점에선 클라이언트 역할을 하는 프로그램<br>, 웹에서는 웹 브라우저, 모바일 앱 등등이다.</p>
</li>
<li><p>웹서버 - 클라이언트에서 자료를 요청하면 요청을 받는게 웹 서버가 된다. 웹서버가 있어도 되고 없어도 되는데<br>사용하는 이유는 로드밸런싱이라는 기술을 한다.</p>
<ul>
<li>로드밸런싱 - 요청을 받아주면 이 요청에 대해서 답을 만들어 내야하는데<br>정적인 파일이면 응답을 바로하던가하고 동적인 파일이면 was에 보내서 응답을 받도록 한다.(웹서버에서 내부적으로 돌아간다.)</li>
<li>클라이언트에서 요청을 하면 웹 서버에서 로드밸런싱이 일어나서 서버가 여러대가 있는데 일을 덜하고 있는 서버에<br>요청해서 답을 얻어서 응답해주는게 웹서버의 역할이다. 이런 효율성을 위해서 웹서버가 필요하다.</li>
<li>정적 파일을 바로 응답해주는게 주요 일이였는데 규모가 커지면서 로드 밸런싱의 역할이 더 중요해졌다.</li>
</ul>
</li>
<li><p>Servlet/JSP(웹 컨테이너) - 동적인 자료를 생성해주는것 html 형태나 json 형태로 답을 한다.</p>
<ul>
<li>html - 로직을 짤 수없는 화면에 바로 보여지는 것만 만든다. 프로그램을 넣을 수 없다.</li>
<li>json - 자료를 요청하면 가공해서 맵 형태(키벨류쌍)로 환경에 대한 정보(mac os, 버전, 프로토콜, 실제 데이터가 인코딩되서 바이트코드로 들어갈 수 있는 프로퍼티,  자료)등을<br>담는다. </li>
</ul>
</li>
<li><p>WAS - 웹서버와 웹 컨테이너를 합친 것</p>
<ul>
<li>웹서버는 정적 콘텐츠를 요청에 따라 전달해 주는 역하을 한다</li>
<li>WAS는 사용자의 요청에 따라 서버에서 프로그램을 실행 및 처리한 뒤 그것을 다시 정적인 페이지로 변환해 반환하는 동적인 처리를 담당한다.</li>
</ul>
</li>
<li><p>웹 서버는 입 출력간의 게이트 역할을 해주는 것이고, WAS에서 실제로 무언가를 생성하는 것이다.</p>
</li>
<li><p>WAS에서는 무거운 프로그램이 동작하지 않는다.</p>
<ul>
<li>에러를 발생시킨다던지 이런 가벼운 동작만하고 무거운건 애플리케이션에서 한다.</li>
</ul>
</li>
</ul>
<h2 id="HTTP-1"><a href="#HTTP-1" class="headerlink" title="HTTP"></a>HTTP</h2><ul>
<li><p>웹에서 가장 많이 사용하는 클라이언트와 서버간의 통신 규약을 말한다.</p>
</li>
<li><p>특정 IP 두개가 서로 통신을 할 때 방식이 TCP/UDP 방식이 있다.</p>
<ul>
<li><p>TCP - A에서 자료를 던지면 B에서 잘 전달 받았으면 ACK라는 반응을 하고, 자료를 모르겠거나 잘 못 되었으면 NACK를 반응하는 등의<br>서로간의 자료를 잘 받았는지 확인을 하면서 통신하는 연결 지향적이다.</p>
</li>
<li><p>UDP - 자료를 일방적으로 던지는 것을 말한다 신뢰성이 없다. 대신 속도가 빠르다<br>패킷단위로 잘게 쪼개서 통신을 할 때 드물게 오류가 발생할 수 있는데 압축을 풀었을 때 오류가 난다던가 하는 일이 생길 수 있다.<br>이런 이유에서 신뢰도가 낮다. </p>
<p><img src="/Java/documents/images/HTTPStructure.jpg" alt="HTTP"></p>
</li>
<li><p>HTTP 요청와 HTTP 응답은 스타트 라인, 메세지해더 빈칸 바디로 구성되어 있다.<br>브라우저에 버튼을 누르거나해서 요청을 하면 요청 프로토콜을 만들고 헤더와 바디에 정보를 담고 흘러가서 서버에 전달이 되고<br>서버입장에서는 요청 프로토콜을 추출해서 메세지 헤더 바디정보 뭔가를 실행한다.<br>그런 다음 브라우저로 보낼 때 응답 프로토콜을 만들어서 스타트라인, 메세지 헤더, 메세지 바디쪽에 뭔가를 출력하고<br>브라우저에 도착하면 응답 프로토콜의 스타트라인, 메세지 헤더, 바디 정보를 추출해서 화면을 렌더링한다.</p>
</li>
<li><p>브라우저가 서버에 요청을 하는 방법은 크게 3가지 url검색창을 통한 url 요청, 버튼, 링크 </p>
<h3 id="HTTP-특징"><a href="#HTTP-특징" class="headerlink" title="HTTP 특징"></a>HTTP 특징</h3></li>
</ul>
</li>
<li><p>Connectionless(비 연결지향)</p>
<ul>
<li>클라이언트에서 서버에 요청을 보내고 서버에서 응답을 하고나면 접속이 끊어지는 특성이다.</li>
</ul>
</li>
<li><p>Stateless (상태 정보 유지 안함)</p>
<ul>
<li>HTTP통신은 요청을 응답하고 접속을 끊기 때문에 클라이언트의 정보를 알 수 없다.</li>
</ul>
</li>
<li><p>이런 특징이 있는데 로그인 처럼 사용자의 정보를 유지시켜야 할 때 단점으로 작용하는데 이런 것을 해결하기 위한 것이 쿠키이다.</p>
</li>
</ul>
<h2 id="HTTP-메세지"><a href="#HTTP-메세지" class="headerlink" title="HTTP 메세지"></a>HTTP 메세지</h2><ul>
<li>HTTP 메세지 - 클라이언트의 요청을 서버에서 응답할 때 응답에 대한 정보를 클라이언트로 보낼때 정보가 담긴<br>메세지를 의미한다. 시작줄, 헤더, 본문으로 구성 되어있다.<h3 id="Head-Field"><a href="#Head-Field" class="headerlink" title="Head Field"></a>Head Field</h3></li>
<li>General-Header, Request/Response-Header, Entity-Header(HTTP Body Info)로 구성되어 있다</li>
<li>Cache-Control(HTTP/1.1)<ul>
<li>웹 서버와 클라이언트의 요청과 응답의 횟수(round-trip)를 줄여 대역폭을 향상하기 위해 사용되며, 보통 만기일 (expiration)과 유효일(validation)을 지정</li>
<li>개발 중에는 보통 no-cache</li>
</ul>
</li>
<li>Connection<ul>
<li>HTTP/1.0은 요청과 응답이후 커넥션을 종료한다. 이러한 오버헤드를 줄이기 위해  “close/keep alive 둘 중의 하나를 설정하여 HTTP/1.1에서는 연결지향으로 설정할 수 있다.</li>
<li>close 제어필드<ul>
<li>요청/응답이후 클라이언트/서버의 연결을 끊겠다는 의미</li>
</ul>
</li>
<li>keep alive <ul>
<li>요청/응답이후에도 연결을 지속하겠다는 의미</li>
</ul>
</li>
</ul>
</li>
<li>Transfer-Encoding<ul>
<li>전체 데이터를 인코딩하기 위해 사용하며, ‘chunked’로 지정하면 Content-Length를 제공하지 않는다</li>
<li>데이터를 암호화하기 위해 보통 사용한다.</li>
</ul>
</li>
</ul>
<h4 id="General-Header"><a href="#General-Header" class="headerlink" title="General-Header"></a>General-Header</h4><ul>
<li>요청/응답 Message에 모두 활용 할 수 있는 기능을 제공함<h4 id="HTTP-Response-Header"><a href="#HTTP-Response-Header" class="headerlink" title="HTTP Response Header"></a>HTTP Response Header</h4></li>
<li>Location - 리소스가 리다이렉트(redirect)된 때에 이동된 주소, 또는 새로 생성된 리소스 주소를 명시한다. 300 응답일 때 어느 페이지로 이동할지 redirect한다.</li>
<li>retry-after - 서버 응답 코드 503에러와 함께 쓰이며, 일정 시간이 지난 후 문서요청을 다시 하라는 헤더 값이다<h4 id="HTTP-Entity"><a href="#HTTP-Entity" class="headerlink" title="HTTP Entity"></a>HTTP Entity</h4></li>
<li>엔티티로 구성됨을 의미하며, 엔티티 헤더와 엔티티 본문으로 구성<ul>
<li>Content-Encoding : 본문이 압축/암호화 되었을 때의 헤더 설정 값 (gzip등)</li>
<li>Content-Type : Response Body Mime Type</li>
<li>Content-Length : 본문의 길이(byte) </li>
</ul>
</li>
<li>Entity Body<ul>
<li>엔티티 본문은 존재 할 수도, 존재하지 않을 수도 있으며, Content-Length/Transfer-Encoding 헤더가 존재한다면 메시지 본문이 존재한다는 것을 의미</li>
</ul>
</li>
</ul>
<h3 id="Request-구조"><a href="#Request-구조" class="headerlink" title="Request 구조"></a>Request 구조</h3><ul>
<li><p>요청</p>
<ul>
<li>시작줄 - 메소드 주소 버전으로 구성되었다, 요청 방식(get , post) / uri / 요청에 사용된 프로토콜의 버전(중요 x 프로토콜은 불변이니깐)</li>
<li>헤더 - 요청에 대한 정보를 담고 있다.</li>
<li>본문 - 요청을 할 때 함께 보낼 데이터를 담고 있다.</li>
</ul>
<p><img src="/Java/documents/images/RequestHeader.jpg" alt="RequestHeader"></p>
</li>
<li><p>HTTP 메서드</p>
<ul>
<li>GET, POST, PUT, PATCH, DELETE 가 있다.</li>
<li>GET - 서버로부터 데이터를 가져올 때 사용, get, 이미지, url입력 방식은 무조건 get방식이다.</li>
<li>POST - 클라이언트가 서버에 데이터를 새로 추가할 때 사용 ,  form태그의 전송방식이 post방식이다.</li>
<li>PUT - 서버에 이미 존재하는 데이터를 업데이트할 때 사용</li>
<li>DELETE - 서버의 데이터를 삭제할 때 사용.</li>
<li>GET과 DELTE를 제외한 나머지는 요청을 보낼 때 본문을 같이 보낼 수 있다.</li>
<li>OPTIONS - 서버가 어떤 메서드를 지원하는지 알아볼 때 사용 (CORS문제에 많이 나온다)<ul>
<li>실제 요청을 보내기전 서버를 테스트해보는 용도</li>
</ul>
</li>
</ul>
</li>
<li><p>참고자료 : <a target="_blank" rel="noopener" href="https://www.zerocho.com/category/HTTP/post/5b4c4e3efc5052001b4f519b">https://www.zerocho.com/category/HTTP/post/5b4c4e3efc5052001b4f519b</a>      </p>
</li>
<li><p>CRUD 위의 것들을 의미</p>
</li>
<li><p>RESTful API에서 다룰 것이다. 어느 정도 특정 조건을 만족하면 REST한 성질을 가진 API다라는 RESTful API라고 하는것</p>
</li>
<li><p>클라이언트측에서 웹서버로 요청</p>
</li>
<li><p>패킷을 구성해서 던진다 패킷은 더 쪼개질 수있다.</p>
</li>
<li><p>메소드를 결정한다 get/post를 많이 사용</p>
</li>
<li><p>GET - 스테이트리스하게 동작하는 대표적인 예 페이지를 받아온다. 정적인 페이지를 나한테 돌려 달라 라는의미 이 페이지를 보여달라 등에 사용.</p>
<ul>
<li>입력 데이터를 URL에 붙여서 전송하므로 헤더에 바디가 없다.</li>
<li>전송하는 자료량에 한계가 있다.</li>
<li>POST보다 본안성이 좋지 않다.</li>
</ul>
</li>
<li><p>POST - GET처럼 쓸 수 있지만 메세지 바디가 존재해서 내가 원하는 만큼 자료를 심어서 보낼 수 있다.(이미지 등)</p>
<ul>
<li>이미지를 전송한다는게 메세지바디에 인코딩 상태로 바이트스트림으로 적힌다. 자료를 더해서 요청을 할 때 자료를 처리해 달라던지 자료를 같이 보낼 때 사용 </li>
<li>스트림 형태로 전송되므로 전송 용량에 제한이 없다.</li>
<li>보안이 우수함</li>
</ul>
</li>
</ul>
<h3 id="Response-구조"><a href="#Response-구조" class="headerlink" title="Response 구조"></a>Response 구조</h3><ul>
<li><p>응답</p>
<ul>
<li>시작줄 - 버전 상태코드 상태메세지로 구성</li>
<li>헤더 - 응답에 대한 정보</li>
<li>본문 - 요청한 데이터를 담아서 보내는데 HTML이 담겨있어서 브라우저가 이걸 받아 화면에 렌더링 한다.</li>
</ul>
<p><img src="/Java/documents/images/ResponseHeader.jpg" alt="RequestHeader"></p>
</li>
<li><p>Request랑 거의 동일</p>
</li>
<li><p>상태코드</p>
<ul>
<li>2XX -&gt; 웹 서버가 성공적으로 클라이언트의 요청에 응답 했음을 의미</li>
<li>3XX -&gt; 다른 페이지로 재 연결 필요가 있음을 통지</li>
<li>4XX -&gt; 클라이언트에 오류를 있음을 나타냄<ul>
<li>404  - 요청한 파일을 찾을 수 없을 때 또는 url패턴 매핑이 안되어 있을 때 뜬다.</li>
<li>405 - 요청한 method가 없을 때  요청한방식이 post로 요청했는데 post가 없고 get밖에 없을 때 뜬다. </li>
</ul>
</li>
<li>5XX -&gt; 서버에서 에러가 발생 했음을 의미 Server Internal Error<ul>
<li>500 - 서버오류 예외가 발생하면 그 아래 코드는 실행되지 않는다.<br>이런 상황일 때 서버 프로그램에서 예외가 발생했다고 뜬다.</li>
</ul>
</li>
</ul>
</li>
<li><p>keep alive를 지원하지 않을 경우</p>
<p>1.</p>
<ul>
<li>웹 서버에 연결한다.</li>
<li>HTML 문서를 다운로드 한다.</li>
<li>웹 서버 연결을 끊는다.</li>
</ul>
<ol start="2">
<li><ul>
<li>HTML 문서의 image, css, javascript 링크들을 읽어서 다운로드해야할 경로를 저장한다.</li>
<li>웹 서버에 연결한다. </li>
<li>첫번째 이미지를 다운로드</li>
<li>연결을 끊는다.</li>
</ul>
</li>
<li><ul>
<li>웹 서버에 연결한다.</li>
<li>두번째 이미지를 다운로드</li>
<li>연결을 끊는다.</li>
</ul>
</li>
</ol>
<ul>
<li>이 과정을 모든 자료를 다운로드할 때까지 반복한다.</li>
</ul>
</li>
<li><p>Keep-alive 설정을 하면, 지정된 시간동안 연결을 끊지 않고 요청을 계속해서 보낼 수 있다<br>.  * 웹 서버에 연결한다.</p>
<ul>
<li>HTML 문서를 다운로드 한다.</li>
<li>Image, css, javascript 들을 다운로드 한다.</li>
<li>모든 문서를 다운로드 받았다면 연결을 끊는다.</li>
</ul>
</li>
<li><p>참교 사이트 : <a target="_blank" rel="noopener" href="https://shlee0882.tistory.com/107?category=703874">https://shlee0882.tistory.com/107?category=703874</a>   </p>
</li>
</ul>
<h2 id="쿠키-Cookie"><a href="#쿠키-Cookie" class="headerlink" title="쿠키(Cookie)"></a>쿠키(Cookie)</h2><ul>
<li><p>클라이언트가 서버에 떨어뜨린 작은 부스러기의 의미로 쿠키라는 명칭을 사용.</p>
</li>
<li><p>클라이언트 로컬에 저장되는 key-value쌍을 갖는 작은 데이터 파일이다.</p>
</li>
<li><p>쿠키를 이용해 로컬에다가 key-value쌍으로 되어있는 상태를 저장한다 이걸 요청을 보낼 때 같이 붙여서 보내면<br>서버에서 요청을 분석해서 사용자를 구별하고 개개인에 맞는 응답을 줄 수 있게 하는 방식이다.</p>
</li>
<li><p>반드시 사용자의 정보가 아니라 다른 세팅도 저장이 될 수 있다.</p>
</li>
<li><p>쿠키의 구성요소</p>
<ul>
<li>이름, 값, 유효시간, 도메인, 경로</li>
</ul>
</li>
<li><p>동작방식</p>
<ul>
<li>예를 들어서 클라이언트가 책을 장바구니에 한 책을 담는다는 요청을 보내면 서버에서 쿠키에 책에 대한 정보를 담아서 응답으로 쿠키를 담아서 보낸다.<br>그런다음 다른 책을 장바구니에 담으면 그전에 응답이 왔던 쿠키(여기서가 떨어져있던 부스러기를 의미하는 듯)를 담아서 요청을 보내면<br>서버에서 요청이 들어온 정보들을 보면서 쿠키를 환경변수가 분석해서 전에 책을 담았던 클라이언트구나하고 인식하고<br>2개의 책이 담긴 쿠키를 다시 클라이언트에게 보낸다.</li>
</ul>
</li>
</ul>
<h2 id="세션-Session"><a href="#세션-Session" class="headerlink" title="세션(Session)"></a>세션(Session)</h2><ul>
<li>세션은 쿠키를 기반으로 하고 있지만, 사용자 정보 파일을 브라우저에 저장하는 쿠키와 달리 세션은 서버측에서 관리한다.<br>서버에서는 클라이언트를 구분하기 위해 세션 ID를 부여하며 웹 브라우저가 서버에 접속해서 브라우저를 종료할 때까지 인증상태를 유지한다.<ul>
<li>물론 접속 시간에 제한을 두어 일정 시간 응답이 없다면 세션을 끊도록 설정이 가능하다.</li>
</ul>
</li>
<li>사용자에 대한 정보를 서버에 저장하기 대문에 쿠키보다 보안에 좋지만, 사용자가 많아질 수록 서버 메모리를 많이 차지하게 된다.</li>
</ul>
<h3 id="세션의-동작-방식"><a href="#세션의-동작-방식" class="headerlink" title="세션의 동작 방식"></a>세션의 동작 방식</h3><ol>
<li>클라이언트가 서버 접속 시 세션 ID를 발급한다.</li>
<li>클라이언트가 세션 ID에 대해 쿠키를 사용해서 저장(JSEESIONID)</li>
<li>클라이언트가 서버에 다시 접속 시 이 쿠키를 이용해서 세션 ID 값을 서버에 전달한다.</li>
</ol>
<h3 id="세션의-특징"><a href="#세션의-특징" class="headerlink" title="세션의 특징"></a>세션의 특징</h3><ul>
<li>각 클라이언트에게 고유 ID를 부여한다.</li>
<li>세션 ID로 클라이언트를 구분해서 클라이언트의 요구에 맞는 서비스를 제공한다.</li>
<li>보안 면에서 쿠키보다 우수하다.</li>
<li>사용자가 많아질 수록 메모리를 많이 차지하게 된다.</li>
</ul>
<h3 id="쿠키와-세션의-차이"><a href="#쿠키와-세션의-차이" class="headerlink" title="쿠키와 세션의 차이"></a>쿠키와 세션의 차이</h3><ul>
<li><p>쿠키와 세션은 비슷한 역할을 하며, 동작 원리도 비슷하다.</p>
<ul>
<li>이유는 세션도 결국 쿠키를 사용하기 때문이다.</li>
</ul>
</li>
<li><p>가장 큰 차이점은 사용자의 기록정보가 저장되는 위치이다.</p>
<ul>
<li>쿠키는 로컬에 저장되고, 세션은 서버에 저장된다.</li>
</ul>
</li>
<li><p>참고자료 : <a target="_blank" rel="noopener" href="https://victorydntmd.tistory.com/34">https://victorydntmd.tistory.com/34</a></p>
</li>
</ul>
<h3 id="캐쉬"><a href="#캐쉬" class="headerlink" title="캐쉬"></a>캐쉬</h3><ul>
<li>캐쉬는 내가 페이지를 요청했을 때 완전히 같은 페이지를 뱉어줄건데 매번 해줘야 하나에서 나온게 Cache-Control</li>
<li>요즘엔 트래픽이 많아서 중요함. 페이지를 새로고침했을 때 바로바로 화면에 나오는게 있는데 이런부분들이 로컬에 이미 다운이 받아져 있고<br>html이 캐슁이 되서 저장이 되어있다. 미리 저장을 해두고 바꿔야하는 부분만 업데이트를 한다.<br>아니면 타이밍 한시간뒤에는 다시 받아온다 던지 이런걸 서버에서 정할 수 있다.</li>
<li>실시간성, 응답성, 전체적인 트랙픽을 낮추는 이세가지사이에 트레이드오프가 있다.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Spring/HTTP/" data-id="ckhrac5f800038cu2edx99d2m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithm/Programmers/SortStringDescending" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Algorithm/Programmers/SortStringDescending/" class="article-date">
  <time datetime="2020-11-21T05:56:13.043Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Algorithm/Programmers/SortStringDescending/">Programmers-문자열 내림차순으로 배치하기</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="프로그래머스-문자열-내림차순으로-배치하기"><a href="#프로그래머스-문자열-내림차순으로-배치하기" class="headerlink" title="프로그래머스 - 문자열 내림차순으로 배치하기"></a>프로그래머스 - <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/12917">문자열 내림차순으로 배치하기</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><ul>
<li>문자열 s에 나타나는 문자를 큰것부터 작은 순으로 정렬해 새로운 문자열을 리턴하는 함수, solution을 완성해주세요.</li>
<li>s는 영문 대소문자로만 구성되어 있으며, 대문자는 소문자보다 작은 것으로 간주합니다.</li>
</ul>
<h3 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h3><ul>
<li>str은 길이 1 이상인 문자열입니다.</li>
</ul>
<table>
<thead>
<tr>
<th>입출력</th>
<th>예</th>
</tr>
</thead>
<tbody><tr>
<td>s</td>
<td>return</td>
</tr>
</tbody></table>
<h2 id="구현-코드"><a href="#구현-코드" class="headerlink" title="구현 코드"></a>구현 코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolutionSortStringDescending</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">solution</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        String answer = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        ArrayList&lt;Character&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            list.add(s.charAt(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        list.sort((o1, o2) -&gt; o2-o1);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">           answer+= list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortStringDescending</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String s = <span class="string">&quot;Zbcdefg&quot;</span>;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> SolutionSortStringDescending().solution(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Algorithm/Programmers/SortStringDescending/" data-id="ckhrac5iz002a8cu20rhbeov9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithm/Programmers/CountPAndY" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Algorithm/Programmers/CountPAndY/" class="article-date">
  <time datetime="2020-11-21T05:56:08.786Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Algorithm/Programmers/CountPAndY/">Programmers-문자열 내 p와 y개수</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="프로그래머스-문자열-내-p와-y의-개수"><a href="#프로그래머스-문자열-내-p와-y의-개수" class="headerlink" title="프로그래머스 - 문자열 내 p와 y의 개수"></a>프로그래머스 - <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/12916">문자열 내 p와 y의 개수</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><ul>
<li>대문자와 소문자가 섞여있는 문자열 s가 주어집니다. s에 ‘p’의 개수와 ‘y’의 개수를 비교해 같으면 True,<br>다르면 False를 return 하는 solution를 완성하세요. ‘p’, ‘y’ 모두 하나도 없는 경우는 항상 True를 리턴합니다. <ul>
<li>단, 개수를 비교할 때 대문자와 소문자는 구별하지 않습니다.</li>
</ul>
</li>
<li>예를 들어 s가 pPoooyY면 true를 return하고 Pyy라면 false를 return합니다.</li>
</ul>
<h3 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h3><ul>
<li>문자열 s의 길이 : 50 이하의 자연수</li>
<li>문자열 s는 알파벳으로만 이루어져 있습니다.</li>
</ul>
<h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><table>
<thead>
<tr>
<th>s</th>
<th>answer</th>
</tr>
</thead>
<tbody><tr>
<td>pPoooyY</td>
<td>true</td>
</tr>
<tr>
<td>Pyy</td>
<td>false</td>
</tr>
</tbody></table>
<h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3><ul>
<li><p>입출력 예 #1</p>
<ul>
<li>‘p’의 개수 2개, ‘y’의 개수 2개로 같으므로 true를 return 합니다.</li>
</ul>
</li>
<li><p>입출력 예 #2</p>
<ul>
<li>‘p’의 개수 1개, ‘y’의 개수 2개로 다르므로 false를 return 합니다.</li>
</ul>
</li>
</ul>
<h2 id="구현-코드"><a href="#구현-코드" class="headerlink" title="구현 코드"></a>구현 코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolutionCountPAndY</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">solution</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> answer = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> pCnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> yCnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i) == <span class="string">&#x27;p&#x27;</span> || s.charAt(i) == <span class="string">&#x27;P&#x27;</span>)&#123;</span><br><span class="line">                pCnt++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">&#x27;y&#x27;</span> || s.charAt(i) == <span class="string">&#x27;Y&#x27;</span>)&#123;</span><br><span class="line">                yCnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (pCnt == <span class="number">0</span> &amp;&amp; yCnt == <span class="number">0</span>)&#123;</span><br><span class="line">            answer = <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           answer = pCnt == yCnt ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountPAndY</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        String s = <span class="string">&quot;Pyy&quot;</span>;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> SolutionCountPAndY().solution(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Algorithm/Programmers/CountPAndY/" data-id="ckhrac5im001y8cu2av078733" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithm/Programmers/ArrangeMyOwnStrings" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Algorithm/Programmers/ArrangeMyOwnStrings/" class="article-date">
  <time datetime="2020-11-21T05:56:08.774Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Algorithm/Programmers/ArrangeMyOwnStrings/">Programmers-문자열 내 마음대로 정렬하기</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="프로그래머스-문자열-내-마음대로-정렬하기"><a href="#프로그래머스-문자열-내-마음대로-정렬하기" class="headerlink" title="프로그래머스 - 문자열 내 마음대로 정렬하기"></a>프로그래머스 - <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/12915">문자열 내 마음대로 정렬하기</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><ul>
<li>문자열로 구성된 리스트 strings와, 정수 n이 주어졌을 때, 각 문자열의 인덱스 n번째 글자를 기준으로 오름차순 정렬하려 합니다.<br>예를 들어 strings가 [sun, bed, car]이고 n이 1이면 각 단어의 인덱스 1의 문자 u, e, a로 strings를 정렬합니다.</li>
</ul>
<h3 id="제한-조건"><a href="#제한-조건" class="headerlink" title="제한 조건"></a>제한 조건</h3><ul>
<li>strings는 길이 1 이상, 50이하인 배열입니다.</li>
<li>strings의 원소는 소문자 알파벳으로 이루어져 있습니다.</li>
<li>strings의 원소는 길이 1 이상, 100이하인 문자열입니다.</li>
<li>모든 strings의 원소의 길이는 n보다 큽니다.</li>
<li>인덱스 1의 문자가 같은 문자열이 여럿 일 경우, 사전순으로 앞선 문자열이 앞쪽에 위치합니다.</li>
</ul>
<h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><table>
<thead>
<tr>
<th>strings</th>
<th>n</th>
<th>return</th>
</tr>
</thead>
<tbody><tr>
<td>[sun, bed, car]</td>
<td>1</td>
<td>[car, bed, sun]</td>
</tr>
<tr>
<td>[abce, abcd, cdx]</td>
<td>2</td>
<td>[abcd, abce, cdx]</td>
</tr>
</tbody></table>
<h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3><ul>
<li><p>입출력 예 1</p>
<ul>
<li>sun, bed, car의 1번째 인덱스 값은 각각 u, e, a 입니다. 이를 기준으로 strings를 정렬하면 [car, bed, sun] 입니다.</li>
</ul>
</li>
<li><p>입출력 예 2</p>
<ul>
<li>abce와 abcd, cdx의 2번째 인덱스 값은 c, c, x입니다. 따라서 정렬 후에는 cdx가 가장 뒤에 위치합니다. abce와 abcd는 사전순으로 정렬하면 abcd가 우선하므로, 답은 [abcd, abce, cdx] 입니다.</li>
</ul>
</li>
</ul>
<h2 id="구현-코드"><a href="#구현-코드" class="headerlink" title="구현 코드"></a>구현 코드</h2><ul>
<li>우선, 나 혼자서 완벽히 해결하지 못한 문제이다. 결과 값은 똑같이 나오지만 프로그래머스의 테스트를 실행했을 대<br>실패하는 테스트가 많이 나왔다. 처음에 내부 구현의 차이를 생각하지 못하고 <code>list.sort()</code> 와 다른 사람이 구현했던 방식인 <code>Arrays.sort()</code>의 차이가 있는건지<br>생각이 들었는데 결국에는 Comparator 인터페이스를 구현하는 것이여서 그 문제가 아니였다.. 좀 멍청한 생각이였던 것 같다.<br>그래서 확인해보니 제한조건에서 주어진 n번째 인덱스가 같은 경우에 전체를 비교해서 사전순으로 정렬하도록 구현을 했어야 했는데<br>나는 n+1번째 인덱스만 비교하도록 구현을 해놨었다. 이게 테스트 실패가 된 부분이였다.<br>제한 조건을 확실히 파악하는게 중요하다는 걸 다시 한번 느꼈다. 그래도 하나 배웠으니… 된 거겠지?<br>내가 처음 실패했던 구현 코드, 바꾼 부분, 다른 분의 코드를 나눠서 올려보겠다.<h3 id="처음-실패했던-구현-코드"><a href="#처음-실패했던-구현-코드" class="headerlink" title="처음 실패했던 구현 코드"></a>처음 실패했던 구현 코드</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.Programmers.PracticeProblem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolutionStringArrange</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String[] solution(String[] strings, <span class="keyword">int</span> n) &#123;</span><br><span class="line">        String[] answer = &#123;&#125;;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</span><br><span class="line">            list.add(strings[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        list.sort((o1, o2) -&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span> (o1.charAt(n) &gt; o2.charAt(n))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (o1.charAt(n) == o2.charAt(n))&#123;</span><br><span class="line">                <span class="keyword">return</span> o1.charAt(n+<span class="number">1</span>) &gt; o2.charAt(n+<span class="number">1</span>) ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        answer = <span class="keyword">new</span> String[list.size()];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answer.length; i++) &#123;</span><br><span class="line">            answer[i] = list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringArrange</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] strings = &#123;<span class="string">&quot;abce&quot;</span>,<span class="string">&quot;abcd&quot;</span>,<span class="string">&quot;cdx&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">2</span>;</span><br><span class="line">        System.out.println(Arrays.toString(<span class="keyword">new</span> SolutionStringArrange().solution(strings,n)));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line">### 수정해서 성공한 구현 코드</span><br><span class="line">```java</span><br><span class="line"><span class="keyword">package</span> com.company.Programmers.PracticeProblem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolutionStringArrange</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String[] solution(String[] strings, <span class="keyword">int</span> n) &#123;</span><br><span class="line">        String[] answer = &#123;&#125;;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strings.length; i++) &#123;</span><br><span class="line">            list.add(strings[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        list.sort((o1, o2) -&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span> (o1.charAt(n) &gt; o2.charAt(n))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (o1.charAt(n) == o2.charAt(n))&#123;</span><br><span class="line">                <span class="keyword">return</span> o1.compareTo(o2); <span class="comment">// 이렇게 전체를 비교했어야 했다.</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        answer = <span class="keyword">new</span> String[list.size()];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; answer.length; i++) &#123;</span><br><span class="line"></span><br><span class="line">            answer[i] = list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringArrange</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        String[] strings = &#123;<span class="string">&quot;abce&quot;</span>,<span class="string">&quot;abcd&quot;</span>,<span class="string">&quot;cdx&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">2</span>;</span><br><span class="line">        System.out.println(Arrays.toString(<span class="keyword">new</span> SolutionStringArrange().solution(strings,n)));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="다른-사람의-구현-코드"><a href="#다른-사람의-구현-코드" class="headerlink" title="다른 사람의 구현 코드"></a>다른 사람의 구현 코드</h3></li>
<li>이렇게 간단하게도 구현 가능한 쉬운 문제였는데.. 왜 나는 해결하지 못 했을까…<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.Programmers.PracticeProblem;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolutionStringArrange</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String[] solution(String[] strings, <span class="keyword">int</span> n) &#123;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(strings, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String o1, String o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (o1.charAt(n) &gt; o2.charAt(n))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (o1.charAt(n) == o2.charAt(n))&#123;</span><br><span class="line">                    <span class="keyword">return</span> o1.compareTo(o2);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> strings;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringArrange</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] strings = &#123;<span class="string">&quot;abce&quot;</span>,<span class="string">&quot;abcd&quot;</span>,<span class="string">&quot;cdx&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">2</span>;</span><br><span class="line">        System.out.println(Arrays.toString(<span class="keyword">new</span> SolutionStringArrange().solution(strings,n)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Algorithm/Programmers/ArrangeMyOwnStrings/" data-id="ckhrac5ik001x8cu2fc131cam" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Algorithm/Programmers/FunctionDevelopment" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Algorithm/Programmers/FunctionDevelopment/" class="article-date">
  <time datetime="2020-11-21T05:55:37.054Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Algorithm/Programmers/FunctionDevelopment/">Programmers-기능개발</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Algorithm-기능개발"><a href="#Algorithm-기능개발" class="headerlink" title="Algorithm - 기능개발"></a>Algorithm - <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42586">기능개발</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><ul>
<li>프로그래머스 팀에서는 기능 개선 작업을 수행 중입니다. 각 기능은 진도가 100%일 때 서비스에 반영할 수 있습니다.</li>
<li>또, 각 기능의 개발속도는 모두 다르기 때문에 뒤에 있는 기능이 앞에 있는 기능보다 먼저 개발될 수 있고, 이때 뒤에 있는 기능은 앞에 있는 기능이 배포될 때 함께 배포됩니다.</li>
<li>먼저 배포되어야 하는 순서대로 작업의 진도가 적힌 정수 배열 progresses와 각 작업의 개발 속도가 적힌 정수 배열 speeds가 주어질 때 각 배포마다 몇 개의 기능이 배포되는지를 return 하도록 solution 함수를 완성하세요.</li>
</ul>
<h3 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h3><ul>
<li>작업의 개수(progresses, speeds배열의 길이)는 100개 이하입니다.</li>
<li>작업 진도는 100 미만의 자연수입니다.</li>
<li>작업 속도는 100 이하의 자연수입니다.</li>
<li>배포는 하루에 한 번만 할 수 있으며, 하루의 끝에 이루어진다고 가정합니다. 예를 들어 진도율이 95%인 작업의 개발 속도가 하루에 4%라면 배포는 2일 뒤에 이루어집니다.</li>
</ul>
<h3 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h3><table>
<thead>
<tr>
<th>progresses</th>
<th>speeds</th>
<th>return</th>
</tr>
</thead>
<tbody><tr>
<td>[93, 30, 55]</td>
<td>[1, 30, 5]</td>
<td>[2, 1]</td>
</tr>
<tr>
<td>[95, 90, 99, 99, 80, 99]</td>
<td>[1, 1, 1, 1, 1, 1]</td>
<td>[1, 3, 2]</td>
</tr>
</tbody></table>
<h3 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h3><ul>
<li><p>입출력 예 #1</p>
<ul>
<li>첫 번째 기능은 93% 완료되어 있고 하루에 1%씩 작업이 가능하므로 7일간 작업 후 배포가 가능합니다.</li>
<li>두 번째 기능은 30%가 완료되어 있고 하루에 30%씩 작업이 가능하므로 3일간 작업 후 배포가 가능합니다. 하지만 이전 첫 번째 기능이 아직 완성된 상태가 아니기 때문에 첫 번째 기능이 배포되는 7일째 배포됩니다.</li>
<li>세 번째 기능은 55%가 완료되어 있고 하루에 5%씩 작업이 가능하므로 9일간 작업 후 배포가 가능합니다.</li>
<li>따라서 7일째에 2개의 기능, 9일째에 1개의 기능이 배포됩니다.</li>
</ul>
</li>
<li><p>입출력 예 #2</p>
<ul>
<li>모든 기능이 하루에 1%씩 작업이 가능하므로, 작업이 끝나기까지 남은 일수는 각각 5일, 10일, 1일, 1일, 20일, 1일입니다. 어떤 기능이 먼저 완성되었더라도 앞에 있는 모든 기능이 완성되지 않으면 배포가 불가능합니다.</li>
<li>따라서 5일째에 1개의 기능, 10일째에 3개의 기능, 20일째에 2개의 기능이 배포됩니다.</li>
</ul>
</li>
</ul>
<h2 id="구현-코드"><a href="#구현-코드" class="headerlink" title="구현 코드"></a>구현 코드</h2><ul>
<li>혼자서 구현을 해보려고 했는데 결국 해결하지 못해서 다른 사람의 코드를 풀이해봤다.</li>
<li>먼저 앞의 기능이 완료가 되야 뒤에 기능들이 배포가 가능하므로, queue를 만든다.</li>
<li>그런다음, queue에  각 기능이 100%가 되는 기간을 구하는 식을 작성하여서 기간을 큐에 담아 준다.(이렇게 풀려했는데 이 식을 생각하지 못했다.)</li>
<li>queue에 처음 요소를 firstFunc이라는 변수에 담아주고, 배포될 수 있는 기능들의 갯수를 세기 위한 count변수를 생성하고,<br>이 count를 담기 위한 ArrayList를 만들어준다.</li>
<li>queue가 비어있지 않을 때까지 반복문을 돌면서 다음 queue의 요소를 빼서 nextFunc이라는 변수에 담고, 만약 앞의 기능이 뒤의 기능보다 기간이 더 길면,<br>앞의 기능이 배포될 때 뒤의 기능이 같이 배포가 되니깐 count를 1증가시켜준다. </li>
<li>그런데 앞의 기능이 뒤의 기능보다 크지 않으면 뒤의 기능은 아직 배포될 준비가 안되어 있는 상태이니깐 이전의 배포가 된 기능들의 갯수를<br>result에 담고, count를 1로 다시 초기화 해준다. 뒤의 기능을 앞의 기능에 담아준다. 그래야 뒤의 기능이 처음이 되서 이 기능이 배포될 때 뒤의<br>기능들이 배포되는지 다시 카운트 할 수 있으니깐</li>
<li>이렇게 반복이 되다가 queue가 비어있으면 while문을 빠져나오고, 마지막 기능의 배포되는 count를 result에 넣어준다.</li>
<li>마지막으로 반복문을 돌면서 배포되는 기능들의 숫자들을 담아 놨던 result를 answer에 대입해서 반환한다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company.Programmers.stackandqueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolutionFunctionDevelopment</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] progresses, <span class="keyword">int</span>[] speeds) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] answer = &#123;&#125;;</span><br><span class="line">        </span><br><span class="line">        Queue&lt;Integer&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; progresses.length; i++) &#123;</span><br><span class="line">            queue.add((<span class="number">100</span>-progresses[i])%speeds[i] == <span class="number">0</span> ? (<span class="number">100</span>-progresses[i])/speeds[i] : (<span class="number">100</span>-progresses[i])/speeds[i]+<span class="number">1</span>);</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> firstFunc = queue.poll();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">1</span>;</span><br><span class="line">        ArrayList&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> nextFunc = queue.poll();</span><br><span class="line">            <span class="keyword">if</span> (firstFunc &gt;= nextFunc)&#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                result.add(count);</span><br><span class="line">                count = <span class="number">1</span>;</span><br><span class="line">                firstFunc = nextFunc;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        result.add(count);</span><br><span class="line">        answer = <span class="keyword">new</span> <span class="keyword">int</span>[result.size()];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; answer.length; j++) &#123;</span><br><span class="line">            answer[j] = result.get(j);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FunctionDevelopment</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] progresses = &#123;<span class="number">93</span>,<span class="number">30</span>,<span class="number">55</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] speeds = &#123;<span class="number">1</span>,<span class="number">30</span>,<span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(<span class="keyword">new</span> SolutionFunctionDevelopment().solution(progresses,speeds)));;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Algorithm/Programmers/FunctionDevelopment/" data-id="ckhrac5ip00218cu22ji0gcwf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Java/JavaAdvanced/NIO" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/21/Java/JavaAdvanced/NIO/" class="article-date">
  <time datetime="2020-11-21T05:36:07.836Z" itemprop="datePublished">2020-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/21/Java/JavaAdvanced/NIO/">Java_NIO</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="NIO-New-Input-Output"><a href="#NIO-New-Input-Output" class="headerlink" title="NIO(New Input Output)"></a>NIO(New Input Output)</h1><h2 id="NIO-의-특징"><a href="#NIO-의-특징" class="headerlink" title="NIO 의 특징"></a>NIO 의 특징</h2><ul>
<li><p>채널을 이용해서 입/출력을 모두 처리한다.(동시에 처리하는 것은 안된다)</p>
</li>
<li><p>IO와 달리 기본적으로 버퍼를 사용한다.</p>
</li>
<li><p>NIO는 Blocking 및 Nonblocking을 모두 지원한다.</p>
<ul>
<li>Non-blocking은 비동기식으로 읽기/쓰기를 시켜놓고 다른 작업을 진행 가능하다(멀티 쓰레드)<h2 id="경로와-파일"><a href="#경로와-파일" class="headerlink" title="경로와 파일"></a>경로와 파일</h2><ul>
<li>java.nio.file.path</li>
<li>Path::get() 메소드</li>
<li>public static Path get(String first, Stirng … more)</li>
<li>public static Path get(URI uri)<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Path path = Paths.get(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">Path path1 = Paths.get(<span class="string">&quot;USERS&quot;</span>,<span class="string">&quot;jeyoung&quot;</span>,<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">Path path2 = Paths.get(<span class="keyword">new</span> URI(<span class="string">&quot;file:///users/jeyoung/1.txt&quot;</span>)); </span><br><span class="line"><span class="comment">// file도 프로토콜이다? 로컬에 접근하는 프로토콜이다 그래서 네트워크는 아니다. 네트워크에서 사용불가 ftp를 사용한다       </span></span><br></pre></td></tr></table></figure></li>
<li>Path의 주요 메소드</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>getFileName()</td>
<td>파일 또는 마지막 디렉토리의 이름을 갖는 Path를 반환</td>
</tr>
<tr>
<td>getNameCount()</td>
<td>루트 경로 이후의 경로의 개수를 반환</td>
</tr>
<tr>
<td>getName()</td>
<td>특정 인덱스의 경로의 이름을 반환</td>
</tr>
<tr>
<td>subpath()</td>
<td>beginIndex부터 endIndex로 구성된 Path를 반환</td>
</tr>
<tr>
<td>getParent()</td>
<td>상위 Path 객체를 반환</td>
</tr>
<tr>
<td>getRoot()</td>
<td>최상위 Path 객체를 반환</td>
</tr>
<tr>
<td>toAbsolutePath()</td>
<td>상대경로의 Path를 절대경로의 Path로 반환</td>
</tr>
<tr>
<td>normalize()</td>
<td>표준화된 경로 표현으로 변환하여 Path로 반환</td>
</tr>
<tr>
<td>toFile()</td>
<td>Path를 File 객체로 반환</td>
</tr>
<tr>
<td>toUri()</td>
<td>URI 객체로 반환</td>
</tr>
</tbody></table>
</li>
</ul>
<ul>
<li><p>java.nio.files.Files</p>
<ul>
<li>Files의 주요 정적 메소드</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>newInputStream()</td>
<td>InputStream을 반환</td>
</tr>
<tr>
<td>newOutputStream()</td>
<td>OutputStream을 반환</td>
</tr>
<tr>
<td>newBufferedReader()</td>
<td>BufferedReader를 반환</td>
</tr>
<tr>
<td>newBufferedWriter()</td>
<td>Buffered Writer를 반환</td>
</tr>
<tr>
<td>newDirectoryStream()</td>
<td>DirectoryStream을 반환</td>
</tr>
<tr>
<td>newByteChannel()</td>
<td>SeekableByteChannel을 반환</td>
</tr>
<tr>
<td>createFile()</td>
<td>빈 파일 생성</td>
</tr>
<tr>
<td>createDirectory()</td>
<td>빈 디렉토리 생성</td>
</tr>
<tr>
<td>delete()</td>
<td>디렉토리 또는 파일을 삭제</td>
</tr>
<tr>
<td>copy()</td>
<td>source를 target으로 복사</td>
</tr>
<tr>
<td>move()</td>
<td>source를 target으로 이동</td>
</tr>
<tr>
<td>readAllLines()</td>
<td>모든 행을 읽어서 List<String>으로 반환</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="Buffers"><a href="#Buffers" class="headerlink" title="Buffers"></a>Buffers</h2><ul>
<li>Direct Buffer vs Non-Direct Buffer</li>
</ul>
<table>
<thead>
<tr>
<th>Direct Buffer</th>
<th>Non-Direct Buffer</th>
</tr>
</thead>
<tbody><tr>
<td>OS 메모리를 직접 사용</td>
<td>JVM 메모리(힙 메모리)</td>
</tr>
<tr>
<td>OS와의 통신에 비해 버퍼 생성이 느림</td>
<td>빠름</td>
</tr>
<tr>
<td>사용 가능 크기가 큼</td>
<td>JVM에 의해서 제한된 메모리만 사용 가능</td>
</tr>
<tr>
<td>입출력 성능이 좋음</td>
<td>입출력 성능이 떨어짐</td>
</tr>
</tbody></table>
<ul>
<li>자주쓰는건 DirectBuffer를 사용하는게 좋다.</li>
</ul>
<ul>
<li><p>버퍼의 생성</p>
<ul>
<li>정적 메소드 allocate()를 이용한 버퍼의 생성<ul>
<li>모든 타입의 non-direct buffer 생성</li>
</ul>
</li>
<li>정적 메소드 wrap()을 이용한 버퍼의 생성<ul>
<li>이미 생성된 배열을 이용하여 non-direct buffer 버퍼 객체 생성</li>
</ul>
</li>
<li>정적 메소드 allocateDirect()를 이용한 direct buffer 생성<ul>
<li>ByteBuffer 정적 메소드를 이용하여 ByteBuffer 생성</li>
<li>생성된 Direct buffer를 asShortBuffer(), asIntBuffer() … 등을 이용해 버퍼 변환</li>
</ul>
</li>
</ul>
</li>
<li><p>버퍼의 사용</p>
<table>
<thead>
<tr>
<th>속성</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>capacity</td>
<td>버퍼의 크기</td>
</tr>
<tr>
<td>limit</td>
<td>버퍼에 있는 데이터의 한계 (flip으로 설정)</td>
</tr>
<tr>
<td>position</td>
<td>버퍼에서 현재 커서의 위치</td>
</tr>
<tr>
<td>mark</td>
<td>reset()으로 돌아오기 위해 표시한 위치</td>
</tr>
</tbody></table>
<ul>
<li>0 &lt;= mark &lt;= position &lt;= limit &lt;= capacity</li>
</ul>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>flip()</td>
<td>limit=position, position=0</td>
</tr>
<tr>
<td>mark()</td>
<td>mark=position</td>
</tr>
<tr>
<td>reset()</td>
<td>position=mark</td>
</tr>
<tr>
<td>rewind()</td>
<td>position=0, mark 삭제</td>
</tr>
<tr>
<td>clear()</td>
<td>position=0, 모든 mark 삭제, limit=capacity</td>
</tr>
<tr>
<td>get()</td>
<td>상대/절대 위치에서 버퍼 읽기</td>
</tr>
<tr>
<td>getP()</td>
<td>P자료형으로 버퍼 읽기</td>
</tr>
<tr>
<td>put()</td>
<td>상대/절대 위치에서 버퍼 쓰기</td>
</tr>
<tr>
<td>putP()</td>
<td>P자료형으로 버퍼 쓰기</td>
</tr>
</tbody></table>
</li>
<li><p>버퍼의 변환</p>
<ul>
<li><p>ByteBuffer로의 수동 변환</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> [] src = &#123;<span class="number">423</span>, <span class="number">525</span>, <span class="number">236</span>, <span class="number">523</span>&#125;;</span><br><span class="line">IntBuffer iBuff = IntBuffer.wrap(src);</span><br><span class="line">ByteBuffer bBuff = ByteBuffer.allocate(iBuff.capacity() * <span class="number">4</span>));</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; iBuff.capacity(); i++) &#123;</span><br><span class="line">  bBuff.putInt(iBuff.get(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use bBuff ...</span></span><br><span class="line"></span><br><span class="line">bBuffer.rewind();</span><br><span class="line">IntBuffer iBuffer2 = bBuffer.asIntBuffer();</span><br><span class="line"><span class="keyword">int</span> [] target = <span class="keyword">new</span> <span class="keyword">int</span>[iBUffer2.capacity()];</span><br><span class="line">iBuffer2.get(target);</span><br><span class="line">System.out.println(Arrays.toString(target));</span><br></pre></td></tr></table></figure>
</li>
<li><p>java.nio.charset.Charset</p>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>forName()</td>
<td>charsetName을 입력받아 Charset 객체 생성</td>
</tr>
<tr>
<td>encode()</td>
<td>String 또는 CharBuffer를 ByteBuffer로 변환하여 반환</td>
</tr>
<tr>
<td>decode()</td>
<td>ByteBuffer를 CharBuffer로 변환하여 반환</td>
</tr>
</tbody></table>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">    String str = <span class="string">&quot;문자열 데이터&quot;</span>;</span><br><span class="line">    Charset charset = Charset.forName(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    ByteBuffer bBuff = charset.encode(str);</span><br><span class="line">    CharBuffer cBuff = charset.decode(bBuff);</span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(cBuff.array()));</span><br><span class="line">   ``` </span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line">* Channels</span><br><span class="line">  * java.nio.channel.FileChannel</span><br><span class="line"></span><br><span class="line">  | 메소드 |    설명 |</span><br><span class="line">  | ----- | ---- |</span><br><span class="line">  | open() | FileChannel 객체 생성 |</span><br><span class="line">  | close() | FileChannel의 리소스를 반환 |</span><br><span class="line">  | read() | ByteBuffer에 FileChannel에서 읽은 내용을 저장 |</span><br><span class="line">  | write() | ByteBuffer의 내용을 FileChannel을 이용해 출력 |</span><br><span class="line">  </span><br><span class="line">* StandardOpenOption</span><br><span class="line"></span><br><span class="line">| 열거형 상수 | 설명 |</span><br><span class="line">| --------- | ---- |</span><br><span class="line">| READ | 읽기용으로 파일 오픈 |</span><br><span class="line">| WRITE    | 쓰기용으로 파일 오픈 |</span><br><span class="line">| CREATE | 파일이 없으면 새로운 파일 생성, 있으면 기존 파일 사용 |</span><br><span class="line">| CREATE_NEW | 파일이 없으면 새로운 파일 생성, 있으면 FileAlreadyExistsException 예외 발생 |</span><br><span class="line">| APPEND | 파일 뒤에 내용 추가 |</span><br><span class="line">| DELETE_ON_CLOSE | 채널을 닫을 때 파일 삭제 |</span><br><span class="line"></span><br><span class="line">* flip() - 현재 포지션을 limit으로 세팅하고 포지션을 <span class="number">0</span>으로 돌리는 역할을 함. 읽은 포지션을 limit으로 기억함.(어느 부분까지 적혀있는지, 사이즈를 말하는 듯)</span><br><span class="line">* channel2.write(readBuffer) 그래서 포지션 <span class="number">0</span>부터 limit까지 쓰게 된다.</span><br><span class="line">* read()하면 포지션은 <span class="number">0</span> 로되고 limit은 capacity랑 같은 사이즈가 되서 원래 사용하지 않은것처럼 돌아간다.</span><br><span class="line">  </span><br><span class="line">```groovy</span><br><span class="line">Path src = Paths.get(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">Path dst = Paths.get(<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> (FileChannel channel1 = FileChannel.open(src, StandardOpenOption.READ);</span><br><span class="line">    FileChannel channel2 = FileChannel.open(dst, StandardOpenOption.WRITE, StandardOpenOption.CREATE))&#123; <span class="comment">//with resourece로 하는게 좋음 create 하면 새로만듬 create_new는 없으니 새로만든다는 의미 파일이 기존에 있으면 에러남</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> read = <span class="number">-1</span>;</span><br><span class="line">    ByteBuffer readBuffer = ByteBuffer.allocate((<span class="keyword">int</span>) channel1.size());</span><br><span class="line">    <span class="comment">// allocate -&gt; allocateDirect(보통사용함)</span></span><br><span class="line">    <span class="comment">// 버퍼 크기를 변경하여 최적화 가능. 버퍼크기가 너무 크면 느려진다. 적절한게 좋음.</span></span><br><span class="line">    read = channel1.read(readBuffer); <span class="comment">// 버퍼를 읽어줌</span></span><br><span class="line">    <span class="keyword">if</span>(read == <span class="number">-1</span>)&#123; <span class="comment">// 읽은게 하나도 없다면</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IOException();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    readBuffer.flip();</span><br><span class="line">    channel2.write(readBuffer); <span class="comment">//</span></span><br><span class="line">    readBuffer.clear();</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>버퍼가 작은 경우</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">src = Paths.get(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">dst = Paths.get(<span class="string">&quot;3.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> (FileChannel channel1 = FileChannel.open(src, StandardOpenOption.READ);</span><br><span class="line">     FileChannel channel2 = FileChannel.open(dst, StandardOpenOption.WRITE, StandardOpenOption.CREATE))&#123; <span class="comment">//with resourece로 하는게 좋음 create 하면 새로만듬 create_new는 없으니 새로만든다는 의미 파일이 기존에 있으면 에러남</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> read = <span class="number">-1</span>;</span><br><span class="line">    ByteBuffer readBuffer = ByteBuffer.allocate(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 채널에서 읽어올때  순서대로 읽어올수 있게 기억하고 있음 readbuffer크기만큼 가져오고 나머지는 대기하고있음</span></span><br><span class="line">    <span class="keyword">while</span> ((read = channel1.read(readBuffer)) != <span class="number">-1</span>)&#123;</span><br><span class="line"></span><br><span class="line">        readBuffer.flip();</span><br><span class="line">        channel2.write(readBuffer);</span><br><span class="line">        readBuffer.clear(); <span class="comment">// 버퍼를 다시 쓸 수 있게 초기화</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://limjoonchul.github.io/2020/11/21/Java/JavaAdvanced/NIO/" data-id="ckhrac5hp00178cu29cxcfz6b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/11/21/Spring/Servlet/">Spring-Servlet</a>
          </li>
        
          <li>
            <a href="/2020/11/21/Spring/Pholymorphism/">Spring-Pholymorphism</a>
          </li>
        
          <li>
            <a href="/2020/11/21/Spring/JSP/">Spring-JSP</a>
          </li>
        
          <li>
            <a href="/2020/11/21/Spring/JDBC/">Spring-JDBC</a>
          </li>
        
          <li>
            <a href="/2020/11/21/Spring/HTTP/">Spring-HTTP</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Facamp lim<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>